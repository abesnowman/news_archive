webpackJsonp(["bundle.Conversation"],{"+paK":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("Dd8w"),r=n.n(o),a=n("Zx67"),i=n.n(a),s=n("Zrlr"),c=n.n(s),l=n("wxAW"),u=n.n(l),d=n("zwoO"),p=n.n(d),f=n("Pf15"),m=n.n(f),h=n("7t5w"),v=n("4n+p"),y=n("sLaq"),w=n("bndy"),T=n("JSXd"),b=function(e,t){return t.match.params.statusId},C=function(e,t){return T.a.selectHydrated(e,b(0,t))},_=function(e,t){return T.a.selectFetchStatus(e,b(0,t))},g=Object(w.createSelector)(_,b,C,function(e,t,n){return{fetchStatus:e,statusId:t,tweet:n}}),I={createLocalApiErrorHandler:Object(y.b)("CONVERSATION_ANALYTICS_SCREEN"),fetchTweetIfNeeded:T.a.fetchOneIfNeeded,scribeAction:h.d},E=Object(v.connect)(g,I),x=n("bgPG"),S=n("AMrV"),M=n("Y2tT"),O=n("Q5Rw"),k=n("eB+D"),A=n("4Umz"),N=n("GiK3"),j=n.n(N),L=n("WgQH"),F=n("jYKd"),R=n.n(F),P=(n("uwYN"),n("KSGD"));n.d(t,"ConversationAnalyticsScreen",function(){return W});var G=n("YuWL"),U=G.formatMessage("You may only view analytics about your own Tweets."),D=G.formatMessage("Tweet Analytics"),B=G.formatMessage("Retry"),H={page:"permalink",section:"analytics"},W=function(e){function t(){var e,n,o,a;c()(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=o=p()(this,(e=t.__proto__||i()(t)).call.apply(e,[this].concat(l))),o._handleFetchTweet=function(){var e=o.props,t=e.createLocalApiErrorHandler;(0,e.fetchTweetIfNeeded)(e.statusId).catch(t(O.a))},o._render=function(){var e=o._getRetweetOrTweet();return e.user.id_str!==o.context.loggedInUserId?j.a.createElement(S.a,{title:U}):j.a.createElement(A.a,{onMessage:o._handleIFrameMessage,src:"https://mobile.twitter.com/i/tfb/v1/quick_promote/lite/"+e.id_str,style:K.iframe})},o._setAppBarRef=function(e){o._appBarRef=e},o._handleIFrameMessage=function(e){if(e&&"quick_promote"===e.name)if("scribe"===e.type){var t=o.props,n=t.scribeAction,a=t.scribeNamespace,i=o._getRetweetOrTweet(),s=e.scribeData||{};n(r()({},a,{component:s.component||"quick_promote",action:s.uiEvent}),r()({},s,{items:[L.a.getTweetItem(i)]}))}else"close"===e.type&&o._appBarRef.goBack()},a=n,p()(o,a)}return m()(t,e),u()(t,[{key:"componentWillMount",value:function(){this._handleFetchTweet()}},{key:"_getRetweetOrTweet",value:function(){return this.props.tweet&&this.props.tweet.retweeted_status||this.props.tweet}},{key:"render",value:function(){var e=this.props,t=e.fetchStatus,n=e.history,o=e.location,r=this._getRetweetOrTweet();return j.a.createElement(k.a,{appBarRef:this._setAppBarRef,backLocation:r?r.permalink:"/",history:n,location:o,title:D},j.a.createElement(M.a,{fetchStatus:t,onRequestRetry:this._handleRequestRetry,render:this._render,retryMessage:B}))}}]),t}(j.a.PureComponent);W.contextTypes={loggedInUserId:P.string};var K=R.a.create(function(e){return{iframe:{flexGrow:1}}});t.default=Object(x.b)(H)(E(W))},"1oEy":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r=n("Zx67"),a=n.n(r),i=n("Zrlr"),s=n.n(i),c=n("wxAW"),l=n.n(c),u=n("zwoO"),d=n.n(u),p=n("Pf15"),f=n.n(p),m=n("+/et"),h=n("r6By"),v=n("7t5w"),y=n("qX3G"),w=n("4n+p"),T=n("bndy"),b=n("3wTJ"),C=n("JSXd"),_=function(e,t){return e.location&&e.location.state&&e.location.state[t]},g=function(e,t){return"PUSH"===t.history.action},I=function(e,t){return t.match.params.statusId},E=function(e,t){return t.match.params.screenName},x=function(e,t){return _(t,"socialContext")},S=function(e,t){return _(t,"contextTweetId")},M=function(e,t){return _(t,"promotedContent")},O=function(e,t){return C.a.selectHydrated(e,I(0,t))},k=function(e,t){return C.a.selectFetchStatus(e,I(0,t))},A=Object(T.createSelector)(y.a,S,k,g,M,O,E,x,I,function(e,t,n,o,r,a,i,s,c){return{contextTweetId:t,initialFetchStatus:n,isForwardNavigation:o,isInitialScreen:!e,promotedContent:r,focalTweet:a,screenName:i,socialContext:s,statusId:c}}),N={googleAnalyticsPageView:v.b,scribePageImpression:v.e,clearTimelineCache:function(e){return Object(b.a)(e)}},j=Object(w.connect)(A,N),L=n("bgPG"),F=n("5wGh"),R=n("bOdI"),P=n.n(R),G=n("d39v"),U=n("uMse"),D=n.n(U),B=n("Q7lt"),H=function(e){var t;return t={},P()(t,G.a.GenericForbidden,{toast:Object(B.a)()}),P()(t,G.a.GenericNotFound,{customAction:D.a}),P()(t,G.a.NotAuthorizedToViewUser,{customAction:function(){Object(B.d)("/"+e,{statusCode:401})}}),P()(t,G.a.OtherUserSuspended,{customAction:function(){Object(B.d)("/account/suspended")}}),P()(t,G.a.StatusNotFound,{customAction:D.a}),P()(t,G.a.StatusNotFoundForbidden,{customAction:D.a}),P()(t,G.a.StatusViewForbidden,{customAction:function(){Object(B.d)("/"+e)}}),P()(t,"showToast",!0),t},W=n("4RsN"),K=n("K7g+"),Y=n.n(K),V=n("qCVd"),z=n("2vbk"),q=n("zAiL"),J=n("GiK3"),Q=n.n(J),Z=n("kKNP"),X=n("IrjW"),$=n.n(X),ee=n("Vzgo"),te=ee.formatMessage("Tweet your reply"),ne=ee.formatMessage("New reply"),oe=ee.formatMessage("Reply"),re=function(e){var t=e.getLocationState,n=e.history;return Q.a.createElement(Z.a,{accessibilityLabel:te,getLocationState:t,history:n,icon:Q.a.createElement($.a,null),label:oe,shortLabel:ne})},ae=re,ie=n("2FIo"),se=Object(ie.a)({loader:function(){return Promise.all([n.e("shared"),n.e("loader.WideLayout")]).then(n.bind(null,"lUbS"))},renderPlaceholder:function(e,t){return null}}),ce=se,le=n("MJph"),ue=n("J/Nj"),de=n("sETZ"),pe=n("86z1"),fe=n("omV+"),me=n("GjBw"),he=(n("AR34"),n("uwYN"),n("Dd8w")),ve=n.n(he),ye=n("fZjL"),we=n.n(ye),Te=n("piG7"),be=n("fX0z"),Ce=n("P7m2"),_e=n("B5c8"),ge=n.n(_e),Ie=n("Ekgy"),Ee=n("c13g"),xe=n.n(Ee),Se=n("sf7G"),Me=n("0QVQ"),Oe=n("zbhr"),ke=n("rbbp"),Ae=n.n(ke),Ne=n("DSYS"),je=n("i2DS"),Le=n.n(je),Fe=n("2KeS"),Re=n("5xYb"),Pe=function(e){return e.content.showMoreCursor.value},Ge=function(e,t){var n=t.module,o=t.threadEntry;return n.selectCursorFetchStatusByValue(e,Pe(o))===Re.a.LOADING},Ue=Object(T.createSelector)(Ge,function(e){return{isLoading:e}}),De=function(e,t){var n=t.module;return Object(Fe.bindActionCreators)({fetchConversationThread:n.fetchConversationThread,scribeAction:v.d},e)},Be=Object(w.connect)(Ue,De),He=n("9NDY"),We=n("4vsE"),Ke=n.n(We),Ye=n("KSGD"),Ve=n("kDK9"),ze=Ve.formatMessage("Show more"),qe=function(e){function t(){var e,n,o,r;s()(this,t);for(var i=arguments.length,c=Array(i),l=0;l<i;l++)c[l]=arguments[l];return n=o=d()(this,(e=t.__proto__||a()(t)).call.apply(e,[this].concat(c))),o._handleClick=function(){var e=o.props,t=e.fetchConversationThread,n=e.threadEntry;o._scribe("click"),t(n)},o._handleLayout=function(e){if(e.nativeEvent.layout){var t=e.nativeEvent.layout.height;o._gapHeight=t}},r=n,d()(o,r)}return f()(t,e),l()(t,[{key:"componentDidMount",value:function(){this._scribe("impression")}},{key:"render",value:function(){var e=this.props,t=e.isLoading,n=e.className;return t?Q.a.createElement(Ke.a,{style:{height:this._gapHeight,justifyContent:"center"}},Q.a.createElement(Le.a,{className:n,size:"small"})):Q.a.createElement(Ke.a,{onLayout:this._handleLayout},Q.a.createElement(He.a,{className:n,label:this._getLabel(),onPress:this._handleClick}))}},{key:"_getLabel",value:function(){var e=this.props.threadEntry.content.showMoreCursor,t=e.displayTreatment;return t&&t.actionText||ze}},{key:"_scribe",value:function(e){var t=this.props,n=t.scribeAction,o=t.scribeNamespace,r=t.threadEntry;n(ve()({},o,{component:"cursor",action:e}),{event_info:r.content.showMoreCursor.cursorType})}}]),t}(Q.a.Component),Je=Object(L.b)()(Be(qe)),Qe=n("R7QR"),Ze=n("mb8w"),Xe=n("Lx4R"),$e=Ae()({},Ie.b,(o={},P()(o,V.a.Tweet,{handlers:P()({},"FocalTweet",Object(Xe.a)({component:be.a,createAdditionalProps:function(e){var t=e.content.focal;return{contextTweetId:t.contextTweetId,socialContext:t.socialContext,promotedContent:t.promotedContent}},divider:function(e){return{top:!1,bottom:e.content.conversationContext.isLastInSelfThread}}}))}),P()(o,V.a.Tombstone,{handlers:P()({},"FocalTweetInlineTombstone",Object(Me.a)({createAdditionalProps:function(e){var t=e.content.focal;return{contextTweetId:t.contextTweetId,isFocalTweet:!0,socialContext:t.socialContext}},shouldDisplayBorder:ge()(!0)}))}),P()(o,V.a.ConversationThread,Te.d(Te.e({splice:function(e){var t=e.entryId,n=e.itemMetadata,o=e.content,r=o.conversationComponents,a=o.showMoreCursor,i=r.length-1,s=Object(Ce.a)(r,function(e,o){if(e.tweetComposerComponent)return lt(t,e.tweetComposerComponent,!0);var r=ut(e);if(r){var s=0===o,c=!a&&o===i;return ct(t,r.id,n,s,c)}if(e.tweetUnavailableComponent)return null;if(e.tombstoneComponent){return at(e,t+"-tombstone-"+o,{isEnd:!a&&o===i,isStart:0===o})}return Object(pe.a)("Unsupported conversation component: "+we()(e)[0]),null});return a&&s.push(rt(e)),s},divider:function(e){var t=e.content.conversationComponents,n=t[0]&&ut(t[0]);return{top:!1,bottom:n&&n.displayType===Ze.a.SelfThread}}}))),P()(o,V.a.Label,Oe.a),P()(o,"ui_threadGap",Te.d(Te.c({isClickable:ge()(!0),render:function(e,t,n){var o=n.module;return Q.a.createElement(Je,{module:o,threadEntry:e.content.parentThread})}}))),P()(o,V.a.TweetComposer,Te.d(Te.f({component:Ne.a,bindActions:ge()({scribe:v.d}),selectData:function(e){e.entry,e.module;return{loggedInUser:function(e){return Object(y.b)(e)}}},createProps:function(e){var t=e.data.loggedInUser,n=e.entry,o=e.actions.scribe,r=e.scribeNamespace;return{avatarUrl:t.profile_image_url_https,onClick:function(){return o(ve()({},r,{element:"add_to_thread",action:"click"}))},onImpression:function(){return o(ve()({},r,{element:"add_to_thread",action:"impression"}))},to:Ae()(Object(Se.b)(n.content.url.url),{state:{isSelfThreadReply:!0}}),userName:t.screen_name,withButton:!0,withConversationLine:n.withConversationLine}},shouldDisplayBorder:ge()(!1),divider:{top:!1,bottom:!0}}))),o)),et=function(e){var t=e.focalTweetId,n=e.contextTweetId,o=e.socialContext,r=e.promotedContent,a=function(e){return e.type===V.a.Tweet&&e.content.id===t||e.type===V.a.Tombstone&&e.content.tweet&&e.content.tweet.id===t};return function(e){var t=xe()(e,a),i=!1;return e.map(function(a,s){var c=s>t;if(a.type!==V.a.Tweet&&a.type!==V.a.Tombstone||c)return a;var l=!i;if(i=!0,!(s<t)){var u=e[s+1],d=void 0;if(u&&u.type===V.a.ConversationThread){var p=u.content.conversationComponents[0]&&u.content.conversationComponents[0].conversationTweetComponent&&u.content.conversationComponents[0].conversationTweetComponent.tweet;d=!p||p.displayType!==Ze.a.SelfThread&&a.content.displayType===Ze.a.SelfThread}else d=!1;if(a.type===V.a.Tombstone){var f={isStart:l,isEnd:!0};return a.content.displayType===Qe.a.Inline?nt({contextTweetId:n,entry:a,socialContext:o,conversationPosition:f}):ot({entry:a,conversationPosition:f})}return tt({originalEntry:a,contextTweetId:n,socialContext:o,promotedContent:r,conversationContext:{isStart:l,isEnd:!0,isLastInSelfThread:d,showReplyContext:!1}})}return a.type===V.a.Tweet?it(a,l):a.type===V.a.Tombstone?st(a,l):void 0})}},tt=function(e){var t=e.originalEntry,n=e.contextTweetId,o=e.socialContext,r=e.promotedContent,a=e.conversationContext;return ue.f(t,{displayType:"FocalTweet",focal:{contextTweetId:n,socialContext:o,promotedContent:r},conversationContext:a})},nt=function(e){var t=e.entry,n=e.contextTweetId,o=e.conversationPosition,r=e.socialContext;return ue.f(ve()({},t,{conversationPosition:o}),{displayType:"FocalTweetInlineTombstone",focal:{contextTweetId:n,socialContext:r}})},ot=function(e){var t=e.entry,n=e.conversationPosition;return ve()({},t,{conversationPosition:n})},rt=function(e){return{entryId:"threadGap-"+e.entryId,type:"ui_threadGap",content:{parentThread:e},itemMetadata:e.itemMetadata}},at=function(e,t,n){return{entryId:t,type:V.a.Tombstone,content:e.tombstoneComponent,itemMetadata:e.itemMetadata,conversationPosition:n}},it=function(e,t){return ue.f(e,{conversationContext:{isStart:t,isEnd:!1,showReplyContext:!1}})},st=function(e,t){return ve()({},e,{conversationPosition:{isStart:t,isEnd:!1}})},ct=function(e,t,n,o,r){return ue.g({entryId:e+"-tweet-"+t,id:t,itemMetadata:n,content:{conversationContext:{isStart:o,isEnd:r,showReplyContext:o}}})},lt=function(e,t,n){return{entryId:e+"-tweetComposer",type:V.a.TweetComposer,content:t,withConversationLine:n}},ut=function(e){var t=e.conversationTweetComponent;return t&&t.tweet},dt=function(e){switch(e){case me.a.NOT_FOUND:return Q.a.createElement(de.a,null);default:return Object(pe.a)("Unhandled timeline unavailable reason: "+e),null}},pt=function(){return Q.a.createElement(de.a,null)},ft=function(e){function t(){var e,n,o,r;s()(this,t);for(var i=arguments.length,c=Array(i),l=0;l<i;l++)c[l]=arguments[l];return n=o=d()(this,(e=t.__proto__||a()(t)).call.apply(e,[this].concat(c))),o._isInitialFocusEntry=function(e){var t=o.props.focalTweetId;return e&&e.content&&e.content.id===t},o._getPreprocessor=Object(W.a)(o,function(e){return e.socialContext},function(e){return e.contextTweetId},function(e){return e.promotedContent},function(e){return e.focalTweetId},function(e,t,n,o){return et({focalTweetId:o,contextTweetId:t,socialContext:e,promotedContent:n})}),r=n,d()(o,r)}return f()(t,e),l()(t,[{key:"render",value:function(){var e=this.props,t=e.apiErrorHandlerMap,n=e.module,o=e.onEntriesUpdate,r=e.title;return Q.a.createElement(fe.a,{apiErrorHandlerMap:t,entryConfiguration:$e,isInitialFocusEntry:this._isInitialFocusEntry,module:n,olderAtTop:!0,onEntriesUpdate:o,preprocessEntryList:this._getPreprocessor(),previewEntries:this._previewEntries(),renderEmptyState:pt,renderUnavailable:dt,title:r})}},{key:"_previewEntries",value:function(){var e=this.props.focalTweet;return e?[ue.g({id:e.id_str})]:void 0}}]),t}(Q.a.Component),mt=ft,ht=n("WgQH"),vt=n("LN7D");n.d(t,"ConversationScreen",function(){return gt});var yt=n("2D6E"),wt=yt.formatMessage("Tweet"),Tt=yt.formatMessage("Thread"),bt=yt.formatMessage("Conversation"),Ct=yt.messageFormatter('{fullName} on Twitter: "{tweetText}"'),_t={page:"permalink",section:"permalink"},gt=function(e){function t(e,n){s()(this,t);var o=d()(this,(t.__proto__||a()(t)).call(this,e,n));return It.call(o),o._shouldRecordTTFL=e.isInitialScreen,o}return f()(t,e),l()(t,[{key:"componentWillMount",value:function(){var e=this.props,t=e.isForwardNavigation,n=e.clearTimelineCache;t&&n(this._getModule())}},{key:"componentWillReceiveProps",value:function(e){if(e.statusId!==this.props.statusId&&e.isForwardNavigation){(0,e.clearTimelineCache)(this._getModule({props:e}))}}},{key:"componentDidMount",value:function(){this._doAnalytics()}},{key:"componentDidUpdate",value:function(e){this.props.statusId!==e.statusId&&this._doAnalytics()}},{key:"render",value:function(){var e=this.props.focalTweet,t=e?Ct({tweetText:e.text,fullName:e.user.name}):null;return Q.a.createElement(Y.a,{title:t},Q.a.createElement(le.a.Configure,{backLocation:"/",title:e&&e.self_thread?Tt:wt,withTabBar:!1},Q.a.createElement(vt.a,{primaryContent:this._renderTimeline(),sidebarContent:this._renderSidebarContent()})))}},{key:"_renderSidebarContent",value:function(){var e=this.props.focalTweet;return e&&e.user.id_str?Q.a.createElement(h.a,{showWhoToFollow:!1},Q.a.createElement(ce,{conversationModule:this._getModule(),focalTweetId:e.id_str})):null}},{key:"_renderTimeline",value:function(){var e=this.props,t=e.focalTweet,n=e.history,o=e.statusId,r=e.socialContext,a=e.promotedContent,i=e.contextTweetId,s=Q.a.createElement(ae,{getLocationState:this._getFabState,history:n});return Q.a.createElement(z.a,{fab:s},Q.a.createElement(mt,{apiErrorHandlerMap:this._getApiErrorHandlerMap(),contextTweetId:i,focalTweet:t,focalTweetId:o,module:this._getModule(),onEntriesUpdate:this._handleEntriesUpdate,promotedContent:a,socialContext:r,title:bt}))}},{key:"_doAnalytics",value:function(){var e=this.props,t=e.promotedContent,n=e.scribeNamespace,o=e.scribePageImpression,r=e.statusId,a=e.googleAnalyticsPageView;o(n,{items:[ht.a.forTweet(r,t)]}),a(n)}}]),t}(Q.a.PureComponent);gt.contextTypes={loggedInUserId:Ye.string},gt.defaultProps={recordTTFL:m.c};var It=function(){var e=this;this._getFabState=function(){var t=e.props,n=t.promotedContent;return{inReplyToStatusId:t.statusId,promotedContent:n}},this._getApiErrorHandlerMap=Object(W.a)(this,function(e){return e.screenName},function(e){return H(e)}),this._getModule=Object(W.a)(this,function(e){return e.statusId},function(e){return Object(F.a)({focalTweetId:e})}),this._handleEntriesUpdate=function(t){var n=t.entries,o=t.fetchStatus,r=e.props.recordTTFL;if(o===q.a.FAILED&&(e._shouldRecordTTFL=!1),e._shouldRecordTTFL&&n.length){var a=n.some(function(e){return e.type===V.a.Tweet});e._shouldRecordTTFL=!1,a&&r("permalink")}}};t.default=Object(L.b)(_t)(j(gt))},"3wTJ":function(e,t,n){"use strict";var o=n("//Fk"),r=n.n(o);t.a=function(e){return function(t,n){var o=e.selectTimeline(n());return t(e.deleteTimeline()),t(e.fetchInitial()).catch(function(a){if(!o||e.selectUnavailableReason(n()))return r.a.reject(a);t(e.restoreTimeline(o))})}}},"9NDY":function(e,t,n){"use strict";var o=n("GiK3"),r=n.n(o),a=n("Z7Ww"),i=n("4vsE"),s=n.n(i),c=n("Mpbj"),l=n.n(c),u=n("jYKd"),d=n.n(u),p=d.a.create(function(e){return{root:{overflow:"hidden",padding:e.spaces.xSmall},dotGroup:{alignItems:"center",flexGrow:1,justifyContent:"space-between",position:"relative",minWidth:"32px",maxWidth:e.spaces.xxLarge},label:{cursor:"pointer",flexGrow:7},dot:{display:"block",borderRadius:"0.107rem",backgroundColor:e.colors.lightGray,height:"0.215rem",width:"0.215rem"}}}),f=function(e){var t=e.label,n=e.onPress,o=e.className;return r.a.createElement(s.a,{accessibilityRole:"button",className:o,onClick:n,style:p.root},r.a.createElement(a.a,{withGutter:!0},m,r.a.createElement(l.a,{color:"blue",style:p.label},t)))},m=r.a.createElement(s.a,{style:p.dotGroup},r.a.createElement(s.a,{style:p.dot}),r.a.createElement(s.a,{style:p.dot}),r.a.createElement(s.a,{style:p.dot}));t.a=f}});