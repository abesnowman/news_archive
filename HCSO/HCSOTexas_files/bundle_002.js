webpackJsonp(["bundle.TweetMediaDetail"],{"2QDH":function(e,t,n){e.exports={default:n("NLm3"),__esModule:!0}},"9iXT":function(e,t){e.exports=Math.sign||function(e){return 0==(e=+e)||e!=e?e:e<0?-1:1}},JD7M:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n("Dd8w"),i=o(a),r=n("eVdM"),s=o(r),l=n("GiK3"),c=o(l),u=n("sT3W"),d=o(u),h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,s.default)("svg",(0,i.default)({},e,{style:[d.default.root,e.style],viewBox:"0 0 24 24"}),c.default.createElement("g",null,c.default.createElement("path",{d:"M19.707 11.293l-6-6a1 1 0 0 0-1.414 1.414L16.586 11H4a1 1 0 1 0 0 2h12.586l-4.293 4.293a1 1 0 0 0 1.414 1.414l6-6a1 1 0 0 0 0-1.414z"})))};h.metadata={height:24,width:24},t.default=h},NLm3:function(e,t,n){n("Zujg"),e.exports=n("FeBl").Math.sign},RExH:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("Dd8w"),a=n.n(o),i=n("Zx67"),r=n.n(i),s=n("Zrlr"),l=n.n(s),c=n("wxAW"),u=n.n(c),d=n("zwoO"),h=n.n(d),m=n("Pf15"),p=n.n(m),f=n("czSA"),_=n("QT/B"),v=n("7t5w"),g=n("4n+p"),w=n("sLaq"),y=n("bndy"),x=n("OMex"),S=n("JSXd"),b=function(e,t){return t.match.params.statusId},M=function(e,t){var n=t.match.params.index;return parseInt(n,10)-1},C=function(e,t){return S.a.selectFetchStatus(e,b(0,t))},D=function(e,t){return S.a.selectHydrated(e,b(0,t))},k=function(e,t){return e.location&&e.location.state&&e.location.state[t]},E=function(e,t){return k(t,"promotedContent")},T=Object(y.createSelector)(x.h,C,M,b,D,E,function(e,t,n,o,a,i){return{dataSaverMode:e,fetchStatus:t,index:n,tweetId:o,tweet:a,promotedContent:i}}),I={createLocalApiErrorHandler:Object(w.b)("TWEET_MEDIA_DETAIL_SCREEN"),fetchTweetIfNeeded:S.a.fetchOneIfNeeded,scribeAction:v.d},P=Object(g.connect)(T,I),L=n("bgPG"),z=n("Y2tT"),O=n("Q5Rw"),Z=n("thTC"),R=n.n(Z),B=n("cNz/"),W=n("sETZ"),j=n("f6lj"),X=n("MJph"),Y=n("GiK3"),N=n.n(Y),U=n("X8fu"),A=(n("uwYN"),n("RaJe")),K=n.n(A),F=n("4vsE"),G=n.n(F),H=n("KSGD"),J=n("xCV+"),q=n.n(J),V=n("kRIX"),Q=n.n(V),$=n("jYKd"),ee=n.n($);n.d(t,"TweetMediaDetailScreen",function(){return ie});var te=n("c5Lw"),ne={page:"permalink",section:"media"},oe=te.formatMessage("Loading Tweet"),ae=function(){return f.canUseDOM&&window.document.body},ie=function(e){function t(e,n){l()(this,t);var o=h()(this,(t.__proto__||r()(t)).call(this,e,n));return re.call(o),o.state={showUI:!0},o}return p()(t,e),u()(t,[{key:"componentWillMount",value:function(){this._handleFetchTweet()}},{key:"componentWillReceiveProps",value:function(e){e.tweetId!==this.props.tweetId&&this._handleFetchTweet(e)}},{key:"render",value:function(){var e=this.props.fetchStatus,t=[se.screenRoot,!this.context.isModal&&se.fixed,this._getBgColorStyle()];return N.a.createElement(j.a,null,N.a.createElement(X.a.Configure,{headerless:!0},N.a.createElement(G.a,{style:t},this._renderHeader(),N.a.createElement(z.a,{accessibilityLabel:oe,fetchStatus:e,onRequestRetry:this._handleFetchTweet,render:this._renderContent}))))}}]),t}(N.a.Component);ie.contextTypes={featureSwitch:H.object,isModal:H.bool},ie.defaultProps={_getBodyNode:ae};var re=function(){var e=this;this._getBgColor=function(){var t=e.props,n=t.index,o=t.tweet;if(!o)return null;var a=o.extended_entities&&o.extended_entities.media||o.card&&o.card.media,i=a&&a[n];if(!(i&&i.ext_media_color&&i.ext_media_color.palette))return null;var r=i.ext_media_color.palette;return Q.a.getForGallery(r)},this._hasColors=function(){return!!e._getBgColor()},this._getBgColorStyle=function(){var t=e._getBgColor();return a()({backgroundColor:ee.a.theme.colors.cellBackground},t?{backgroundColor:"rgb("+t.rgb.red+", "+t.rgb.green+", "+t.rgb.blue+")",transitionProperty:"background-color",transitionDuration:".5s"}:{})},this._renderContent=function(){var t=e.props,n=t.dataSaverMode,o=t.index,a=t.promotedContent,i=t.tweet,r=e.state.showUI,s=i.extended_entities&&i.extended_entities.media||i.card&&i.card.media;return s?N.a.createElement(G.a,{style:se.root},N.a.createElement(B.a,{dataSaverMode:n,mediaIndex:o,mediaItems:s,onMediaDetailZoomed:e._handleMediaDetailZoomed,onMediaItemChanged:e._handleMediaItemChanged,promotedContent:a,videoId:K.a.forTweet(i.id_str),withLightOnDarkColorScheme:e._hasColors()}),i?N.a.createElement(q.a,{style:!r&&se.hidden,withGutter:!0},N.a.createElement(U.a,{color:e._hasColors()?"white":"deepGray",displayStyle:"block",style:se.actionsBar,tweet:i,withCount:!0})):null):N.a.createElement(W.a,null)},this._renderHeader=function(){var t=e.props,n=t.history,o=t.location,a=t.tweet,i=e.state.showUI,r=a&&a.user?"/"+a.user.screen_name+"/status/"+a.id_str:"/";return N.a.createElement(_.a,{backIcon:R.a,backLocation:r,history:n,iconColor:e._hasColors()?"white":"blue",location:o,style:[se.appBar,!i&&se.hidden],withShadow:!1})},this._handleFetchTweet=function(t){var n=e.props||t,o=n.createLocalApiErrorHandler;(0,n.fetchTweetIfNeeded)(n.tweetId).catch(o(O.a))},this._handleMediaDetailZoomed=function(t){e.setState(function(){return{showUI:!t}})},this._handleMediaItemChanged=function(t){var n=e.props,o=n.history,i=n.index,r=n.location,s=n.scribeAction,l=n.scribeNamespace,c=n.tweet;if(t!==i){s(a()({},l,{component:"gallery",element:i<t?"next":"prev",action:"click"}),{event_value:t+1});var u=c.extended_entities&&c.extended_entities.media||c.card&&c.card.media;o.replace({state:r.state,pathname:u[t].expanded_url})}}},se=ee.a.create(function(e){return{appBar:{backgroundColor:"transparent"},hidden:{visibility:"hidden"},root:{flexGrow:1,zIndex:1},screenRoot:{overflowX:"hidden",height:"100%",width:"100%"},fixed:{position:"fixed"},actionsBar:{height:e.spaces.xxLarge}}});t.default=Object(L.b)(ne)(P(ie))},Zujg:function(e,t,n){var o=n("kM2E");o(o.S,"Math",{sign:n("9iXT")})},"cNz/":function(e,t,n){"use strict";var o=n("Zx67"),a=n.n(o),i=n("Zrlr"),r=n.n(i),s=n("wxAW"),l=n.n(s),c=n("zwoO"),u=n.n(c),d=n("Pf15"),h=n.n(d),m=n("czSA"),p=n("2uMJ"),f=n("wblJ"),_=n.n(f),v=n("JD7M"),g=n.n(v),w=n("uMse"),y=n.n(w),x=n("GiK3"),S=n.n(x),b=n("jYKd"),M=n.n(b),C=n("2QDH"),D=n.n(C),k=n("CF/l"),E=n("O27J"),T=n.n(E),I=n("4vsE"),P=n.n(I),L=n("/fEa"),z=.6,O=10,Z={stiffness:267,damping:20},R=function(e){function t(e,n){r()(this,t);var o=u()(this,(t.__proto__||a()(t)).call(this,e,n));o._handleKeyRight=function(e){e&&e.stopPropagation(),o._goToItem(o.state.currentItem+1)},o._handleKeyLeft=function(e){e&&e.stopPropagation(),o._goToItem(o.state.currentItem-1)},o._handleMouseUp=function(e){o._handleSwipeEnd(e,e.clientX)},o._handleMouseDown=function(e){o._handleSwipeStart(e,e.clientX)},o._handleMouseMove=function(e){o._handleSwipeMove(e,e.clientX)},o._handleTouchStart=function(e){if(!(e.touches&&e.touches.length>1)){var t=e.changedTouches[0].clientX;o._handleSwipeStart(e,t)}},o._handleTouchMove=function(e){if(!(e.touches&&e.touches.length>1)){var t=e.changedTouches[0].clientX;o._handleSwipeMove(e,t)}},o._handleTouchEnd=function(e){var t=e.changedTouches[0].clientX;o._handleSwipeEnd(e,t)},o._handleSwipeStart=function(e,t){o.props.locked||(e.preventDefault(),e.stopPropagation(),o._xPos=t,o._swipeStart=Date.now(),o._isSwiping=!1)},o._handleSwipeMove=function(e,t){if(!o.props.locked&&null!=o._xPos){var n=o._xPos-t;Math.abs(n)<O||(o.setState(function(e){if("number"==typeof e.itemWidth)return{transformLeft:-e.itemWidth*e.currentItem-n}}),o._isSwiping=!0)}},o._handleSwipeEnd=function(e,t){var n=o.state,a=n.currentItem,i=n.itemWidth;if(o._isSwiping||(o._xPos=null),e.stopPropagation(),e.preventDefault(),"number"==typeof o._xPos){var r=o._xPos-t,s=Math.abs(r),l=Date.now();if("number"==typeof o._swipeStart){var c=s/(l-o._swipeStart);if("number"==typeof i){var u=i/3,d=c>z;s>u||d?o._goToItem(a+D()(r)):o._goToItem(a),o._isSwiping=!1,o._xPos=null}}}},o._transitionComplete=function(){o.props.onChange(o.state.currentItem)},o._setDimensions=function(){var e=(o._getFrameOffsetWidth()-o.props.cellSpacing)/o.props.itemsToShow;"number"==typeof e&&o.setState({itemWidth:e},function(){o.setState(function(t){return{areDimensionsSet:!0,transformLeft:o._getLeftForItem(t.currentItem,e)}})})},o._setSwipeableRef=function(e){o._swipeableRef=e},o.state={areDimensionsSet:!1,currentItem:e.currentItem,itemWidth:null,transformLeft:0};var i=["touchend","touchmove","touchstart"];return o._hasTouch=m.canUseDOM&&i.some(function(e){return!!Object(p.a)(e)}),o._springOptions=o._hasTouch?Z:L.presets.noWobble,o._isSwiping=!1,o._xPos=null,o}return h()(t,e),l()(t,[{key:"componentDidMount",value:function(){this._setDimensions(),window.addEventListener("resize",this._setDimensions),window.document.addEventListener("mouseup",this._handleMouseUp),this._bindKeyboardShortcuts()}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this._setDimensions),window.document.removeEventListener("mouseup",this._handleMouseUp),this._unbindKeyboardShortcuts&&this._unbindKeyboardShortcuts()}},{key:"componentWillReceiveProps",value:function(e){e.currentItem!==this.props.currentItem&&this._goToItem(e.currentItem,!0)}},{key:"render",value:function(){var e=this,t=this.props,n=t.children,o=t.cellSpacing,a=S.a.Children.count(n),i=o*a,r=this.state,s=r.transformLeft,l=r.itemWidth,c={transformLeft:Object(L.spring)(s,this._springOptions)};return S.a.createElement(P.a,{onMouseDown:this._handleMouseDown,onMouseMove:this._handleMouseMove,onTouchEnd:this._handleTouchEnd,onTouchMove:this._handleTouchMove,onTouchStart:this._handleTouchStart,ref:this._setSwipeableRef,style:W.root},this.state.areDimensionsSet?S.a.createElement(L.Motion,{style:c},function(t){var r=t.transformLeft;return S.a.createElement(P.a,{accessibilityRole:"list",style:[W.list,{marginLeft:-.5*o,marginRight:-.5*o,transform:[{translate3d:r+"px, 0, 0"}],width:l&&a?l*a+i+"px":"100%"}]},e._renderItems(n))}):null)}},{key:"_bindKeyboardShortcuts",value:function(){var e={left:this._handleKeyLeft,right:this._handleKeyRight};this._unbindKeyboardShortcuts=Object(k.a)(e)}},{key:"_renderItems",value:function(e){var t=this.props.cellSpacing,n=this.state.itemWidth;return S.a.Children.toArray(S.a.Children.map(e,function(e){return S.a.createElement(P.a,{accessibilityRole:"listitem",style:[W.item,{width:n?n+"px":"100%",marginLeft:t/2+"px",marginRight:t/2+"px"}]},e)}))}},{key:"_goToItem",value:function(e,t){var n=this.state,o=n.currentItem,a=n.itemWidth,i=this.props.children,r=e;(e<0||e>=S.a.Children.count(i))&&(r=o),"number"==typeof a&&this.setState({currentItem:r,transformLeft:this._getLeftForItem(r,a)},o===r||t?y.a:this._transitionComplete)}},{key:"_getLeftForItem",value:function(e,t){return-1*(t*e+this.props.cellSpacing*e)}},{key:"_getFrameOffsetWidth",value:function(){var e=T.a.findDOMNode(this._swipeableRef);return e&&e instanceof window.HTMLElement?e.offsetWidth:0}}]),t}(S.a.Component);R.defaultProps={cellSpacing:0,currentItem:0,locked:!1,onChange:y.a,itemsToShow:1};var B=R,W=M.a.create(function(e){return{root:{flexGrow:1,transform:[{translate3d:"0,0,0"}]},list:{display:"block",height:"100%",padding:"0",position:"absolute",transform:[{translate3d:"0,0,0"}]},item:{boxSizing:"border-box",display:"inline-flex",flexDirection:"column",height:"100%",marginVertical:"auto",paddingHorizontal:"0.04em"}}}),j=(n("KSGD"),n("id6J")),X=j.formatMessage("Next"),Y=j.formatMessage("Previous"),N=function(e){function t(e,n){r()(this,t);var o=u()(this,(t.__proto__||a()(t)).call(this,e,n));o._handleNextSlide=function(e){var t=o.props,n=t.children,a=t.currentSlide,i=t.onChange,r=t.slidesToShow;e&&e.stopPropagation();var s=n.length,l=Math.min(a+1,s-r);l!==a&&i(l)},o._handlePreviousSlide=function(e){var t=o.props,n=t.currentSlide,a=t.onChange;e&&e.stopPropagation();var i=Math.max(n-1,0);i!==n&&a(i)};var i=["touchend","touchmove","touchstart"];return o._hasTouch=m.canUseDOM&&i.some(function(e){return!!Object(p.a)(e)}),o}return h()(t,e),l()(t,[{key:"render",value:function(){var e=this.props,t=e.children,n=e.cellSpacing,o=e.currentSlide,a=e.locked,i=e.onChange,r=e.slidesToShow;return S.a.createElement(P.a,{style:A.root},S.a.createElement(B,{cellSpacing:n,children:t,currentItem:o,itemsToShow:r,locked:a,onChange:i}),this._hasTouch?null:this._renderNavButtons())}},{key:"_renderNavButtons",value:function(){var e=this.props,t=e.currentSlide,n=e.slidesToShow,o=this.props.children.length,a=0===t,i=t+n>=o;return S.a.createElement("div",null,S.a.createElement(P.a,{accessibilityLabel:Y,accessibilityRole:"button",disabled:a,onClick:this._handlePreviousSlide,style:[A.navButton,A.navButtonLeft,a&&A.navButtonDisabled]},S.a.createElement(_.a,{style:A.icon})),S.a.createElement(P.a,{accessibilityLabel:X,accessibilityRole:"button",disabled:i,onClick:this._handleNextSlide,style:[A.navButton,A.navButtonRight,i&&A.navButtonDisabled]},S.a.createElement(g.a,{style:A.icon})))}}]),t}(S.a.Component);N.defaultProps={cellSpacing:0,currentSlide:0,locked:!1,onChange:y.a,slidesToShow:1};var U=N,A=M.a.create(function(e){return{root:{flex:1},icon:{color:e.colors.white},navButton:{backgroundColor:"rgba(0,0,0,0.4)",borderWidth:0,cursor:"pointer",padding:"10px",position:"absolute",top:"50%",transform:[{translateY:"-50%"}]},navButtonDisabled:{opacity:.3},navButtonLeft:{left:"2px"},navButtonRight:{right:"2px"}}}),K=n("hlyO"),F=n.n(K),G=n("Dd8w"),H=n.n(G),J=n("+6Bu"),q=n.n(J),V=n("YkY+"),Q=n("AMrV"),$=n("lWhZ"),ee=n("R/an"),te=(n("uwYN"),300),ne={zoom:1,xPos:0,yPos:0,lastX:0,lastY:0,zoomCenter:{x:0,y:0}},oe=function(e,t,n){return Math.min(t,Math.max(e,n))},ae=function(e,t){return Math.sqrt(Math.pow(e.clientY-t.clientY,2)+Math.pow(e.clientX-t.clientX,2))},ie=function(e,t){return{x:(e.clientX+t.clientX)/2,y:(e.clientY+t.clientY)/2}},re=function(e){function t(e,n){r()(this,t);var o=u()(this,(t.__proto__||a()(t)).call(this,e,n));o._handleTouchStart=function(e){o._zoomedDimensions=o._zoomable.getBoundingClientRect(),o._moved=!1;var t=e.touches.length;2===t?(e.preventDefault(),o._handlePinchStart(e)):1===t&&o._handleTapStart(e)},o._handleTouchMove=function(e){var t=e.touches.length;2===t?o._handlePinchMove(e):1===t&&(o._moved=!0,o._handlePanMove(e))},o._handleTouchEnd=function(e){var t=o.props,n=t.maxZoom,a=t.minZoom,i=t.onTap,r=oe(a,n,o.state.zoom),s=o.state.zoom;s!==r&&1===r?o.resetZoom():o.setState({lastX:0,lastY:0,zoom:r}),0===e.touches.length?(o._lastTouchTime&&o._lastTouchTime+te>e.timeStamp?(clearTimeout(o._clickTimer),o._handleDoubleTap(e)):s<=1&&!o._moved&&(o._clickTimer=setTimeout(i,te)),o._lastTouchTime=e.timeStamp):e.preventDefault()},o._setZoomableRef=function(e){o._zoomableRef=e};var i=["touchend","touchmove","touchstart"];return o._supported=m.canUseDOM&&i.some(function(e){return!!p.b.checkEventSupported(e)}),o.state=H()({},ne),o}return h()(t,e),l()(t,[{key:"render",value:function(){var e=this;if(!this._supported)return this.props.children;var t=this.state,n=t.zoom,o=t.xPos,a=t.yPos,i=t.zoomCenter,r={zoom:Object(L.spring)(n),xPos:Object(L.spring)(o),yPos:Object(L.spring)(a),zoomCenterX:Object(L.spring)(i.x),zoomCenterY:Object(L.spring)(i.y)};return S.a.createElement(P.a,{onTouchEnd:this._handleTouchEnd,onTouchMove:this._handleTouchMove,onTouchStart:this._handleTouchStart,style:se.fill},S.a.createElement(L.Motion,{style:r},function(t){var n=t.zoom,o=t.xPos,a=t.yPos,i=t.zoomCenterX,r=t.zoomCenterY;return S.a.createElement(P.a,{ref:e._setZoomableRef,style:[se.fill,{transform:[{scale:n},{translateX:o},{translateY:a}],transformOrigin:i+"px "+r+"px"}]},e.props.children)}))}},{key:"componentDidMount",value:function(){this._supported&&(this._zoomable=T.a.findDOMNode(this._zoomableRef),this._updateWindowDimensions())}},{key:"componentWillReceiveProps",value:function(e){this._supported&&e.resetZoom&&1!==this._zoom&&this.resetZoom()}},{key:"resetZoom",value:function(){this.props.onZoomed(!1),this.setState(H()({},ne))}},{key:"_handlePanMove",value:function(e){if(!(this.state.zoom<=1)&&this._zoomedDimensions&&this._windowDimensions){var t=e.touches[0],n=t.clientX,o=t.clientY;if(!this.state.lastX||!this.state.lastY)return void this.setState({lastX:n,lastY:o});var a=this.state,i=a.lastX,r=a.lastY,s=a.xPos,l=a.yPos,c=a.zoom,u=a.zoomCenter,d=u.x,h=u.y,m=this._windowDimensions,p=m.height,f=m.width,_=this._itemDimensions,v=_.height,g=_.left,w=_.top,y=_.width,x=this._zoomedDimensions,S=x.height,b=x.width,M=0,C=0;if(b-f>0){var D=-(i-n),k=d+g,E=(d*c-k)/c,T=f-k,I=((y-d)*c-T)/c;M=Math.max(-(I+s),Math.min(E-s,D))/c}if(S-p>0){var P=-(r-o),L=h+w,z=(h*c-L)/c,O=p-L,Z=((v-h)*c-O)/c;C=Math.max(-(Z+l),Math.min(z-l,P))/c}this.setState({lastX:n,lastY:o,xPos:s+M,yPos:l+C})}}},{key:"_handlePinchStart",value:function(e){var t=e.touches;if(this._updateWindowDimensions(),this._lastDistance=ae(t[0],t[1]),1===this.state.zoom){var n=ie(t[0],t[1]);this.setState({zoomCenter:this._getZoomCenter(n.x,n.y)}),this.props.onZoomed(!0)}}},{key:"_handlePinchMove",value:function(e){if(this.state.zoomCenter){var t=this.props,n=t.maxZoom,o=t.maxZoomBounce,a=t.minZoom,i=t.minZoomBounce,r=ae(e.touches[0],e.touches[1]),s=r/this._lastDistance,l=oe(a-i,n+o,this.state.zoom*s);this._lastDistance=r,this.setState({zoom:l})}}},{key:"_handleTapStart",value:function(e){var t=e.touches;this._tapCenter=this._getZoomCenter(t[0].clientX,t[0].clientY)}},{key:"_handleDoubleTap",value:function(e){var t=this.props,n=t.maxZoom,o=t.onZoomed;1!==this.state.zoom?this.resetZoom():(this._updateWindowDimensions(),this.setState({zoom:n,zoomCenter:this._tapCenter}),o(!0))}},{key:"_getZoomCenter",value:function(e,t){this._itemDimensions=this._zoomable.getBoundingClientRect();var n=this._itemDimensions;return{x:e-n.left,y:t-n.top}}},{key:"_updateWindowDimensions",value:function(){this._windowDimensions={height:window.innerHeight,width:window.innerWidth}}}]),t}(S.a.Component);re.defaultProps={maxZoom:2.5,maxZoomBounce:.15,minZoom:1,minZoomBounce:.15,onClick:y.a,onZoomed:y.a,resetZoom:!1};var se=M.a.create(function(e){return{fill:{flex:1}}}),le=re,ce=(n("k2ao"),n("mq/L")),ue=ce.formatMessage("Embedded"),de=function(e){function t(){return r()(this,t),u()(this,(t.__proto__||a()(t)).apply(this,arguments))}return h()(t,e),l()(t,[{key:"render",value:function(){var e=this.props,t=e.onClick,n=e.onContextMenu,o=e.onError,a=e.onZoomed,i=e.photo,r=e.resetZoom,s=e.size,l=e.zoomable,c=e.style,u=Object($.a)(i.media_url_https,s),d=t,h=S.a.createElement(ee.a,{accessibilityLabel:ue,onContextMenu:n,onError:o,resizeMode:"contain",source:u,style:he.img});return l&&(h=S.a.createElement(le,{onTap:t,onZoomed:a,resetZoom:r},h),d=y.a),S.a.createElement(P.a,{onClick:d,style:c},h)}}]),t}(S.a.Component);de.defaultProps={className:"",index:1,size:"original",zoomable:!1};var he=M.a.create(function(e){return{img:H()({},M.a.absoluteFillObject,{height:"auto",margin:"auto",maxHeight:"100%",maxWidth:"100%",width:"auto"})}}),me=de,pe=n("j/HU"),fe=n("sAt4"),_e=n("4zD+"),ve=n("C+aP"),ge=n("xCV+"),we=n.n(ge),ye=function(e){function t(){return r()(this,t),u()(this,(t.__proto__||a()(t)).apply(this,arguments))}return h()(t,e),l()(t,[{key:"render",value:function(){var e=this.props,t=e.promotedContent,n=e.video,o=e.videoId;return S.a.createElement(we.a,{isLarge:!0,style:xe.root},S.a.createElement(ve.a,H()({},Object(_e.a)(o,n),{autoplay:fe.b.Always,autoplayWithVolume:!0,promotedContent:t})))}}]),t}(S.a.PureComponent),xe=M.a.create({root:{flexBasis:0,flexGrow:1,flexShrink:1,justifyContent:"center"}}),Se=ye,be=n("418H"),Me=n.n(be),Ce=n("aYYq"),De=Ce.formatMessage("An error occurred loading this image"),ke=Ce.formatMessage("Open image in browser"),Ee=function(e){function t(e,n){r()(this,t);var o=u()(this,(t.__proto__||a()(t)).call(this,e,n));return o._handleError=function(e){o.setState({error:e.nativeEvent.error})},o._handleLoad=function(){o.setState({error:null})},o._handleRetry=function(){o.setState({error:null})},o._handleContextMenu=function(e){pe.e&&(e.preventDefault(),e.stopPropagation(),o.setState({contextMenuPoint:{left:e.clientX,top:e.clientY}}),o.setState({showContextMenu:!0}))},o._handleContextCancel=function(){return o.setState({showContextMenu:!1})},o._handleOpenImageURI=function(){Me.a.openURL(o.props.mediaDetail.media_url_https),o._handleContextCancel()},o._getContextMenuItems=function(){return[{text:ke,onClick:o._handleOpenImageURI}]},o.state={error:null,contextMenuPoint:{top:0,left:0},showContextMenu:!1},o}return h()(t,e),l()(t,[{key:"shouldComponentUpdate",value:function(e,t){return!F()(e,this.props)||!F()(t,this.state)}},{key:"componentWillReceiveProps",value:function(e){this.setState({error:null,showContextMenu:!1})}},{key:"render",value:function(){var e=void 0,t=void 0,n=this.props,o=(n.index,n.dataSaverMode),a=n.mediaDetail,i=n.promotedContent,r=n.videoId,s=n.withLightOnDarkColorScheme,l=q()(n,["index","dataSaverMode","mediaDetail","promotedContent","videoId","withLightOnDarkColorScheme"]),c=this.state,u=c.error,d=c.showContextMenu;return a&&(e="photo"===a.type,t=["animated_gif","video","vine"].indexOf(a.type)>-1),S.a.createElement(P.a,{style:Te.root},u?S.a.createElement(Q.a,{onRetry:this._handleRetry,style:Te.errorDetail,title:De,withLightOnDarkColorScheme:s}):null,d?S.a.createElement(V.a,{items:this._getContextMenuItems(),onCloseRequested:this._handleContextCancel,position:this.state.contextMenuPoint}):null,!u&&e?S.a.createElement(me,H()({},l,{dataSaverMode:o,onContextMenu:this._handleContextMenu,onError:this._handleError,onLoad:this._handleLoad,photo:a,style:Te.photo,zoomable:!0})):null,!u&&t?S.a.createElement(Se,{promotedContent:i,video:a,videoId:r}):null)}}]),t}(S.a.Component);Ee.defaultProps={dataSaverMode:!1,index:1};var Te=M.a.create(function(e){return{root:{flexGrow:1},photo:{height:"100%",position:"absolute",width:"100%"},errorDetail:{alignItems:"center",alignSelf:"center",flexGrow:1,maxWidth:e.maxWidths.small}}}),Ie=Ee,Pe=function(e){function t(e,n){r()(this,t);var o=u()(this,(t.__proto__||a()(t)).call(this,e,n));return o._handleMediaDetailZoomed=function(e){o.state.carouselLocked!==e&&o.setState({carouselLocked:e}),o.props.onMediaDetailZoomed(e)},o.state={carouselLocked:!1},o}return h()(t,e),l()(t,[{key:"shouldComponentUpdate",value:function(e,t){return!F()(e,this.props)||!F()(t,this.state)}},{key:"render",value:function(){var e=this,t=this.props,n=t.dataSaverMode,o=t.mediaIndex,a=t.mediaItems,i=t.promotedContent,r=t.videoId,s=t.withLightOnDarkColorScheme;return S.a.createElement(P.a,{style:Le.root},a.length>1?S.a.createElement(U,{currentSlide:o,locked:this.state.carouselLocked,onChange:t.onMediaItemChanged},a.map(function(t,l){return S.a.createElement(Ie,{dataSaverMode:n,index:l+1,key:l,mediaDetail:a[l],onZoomed:e._handleMediaDetailZoomed,promotedContent:i,resetZoom:o!==l,videoId:r,withLightOnDarkColorScheme:s})})):S.a.createElement(Ie,{dataSaverMode:n,index:o,mediaDetail:a[0],onZoomed:t.onMediaDetailZoomed,promotedContent:i,videoId:r,withLightOnDarkColorScheme:s}))}}]),t}(S.a.Component);Pe.defaultProps={dataSaverMode:!1,mediaIndex:0,onMediaDetailZoomed:y.a,onMediaItemChanged:y.a};var Le=M.a.create(function(e){return{root:{flexGrow:1,zIndex:1}}});t.a=Pe},lWhZ:function(e,t,n){"use strict";function o(e){var t={};return s()(e).sort().forEach(function(n){t[n]=e[n]}),t}n.d(t,"a",function(){return f});var a=n("d7EF"),i=n.n(a),r=n("fZjL"),s=n.n(r),l=n("r9Ma"),c=n("1nuA"),u=n.n(c),d=function(e){return e.indexOf(".twimg.com/media/")>-1},h={original:"",tiny:"tiny",thumbnail:"thumb",smallest:"240x240",smaller:"360x360",small:"small",medium:"medium",large:"large"},m={jpeg:"jpg"},p=function(e){return e.substring(e.lastIndexOf(".")+1)},f=function(e,t,n){Object(l.a)(h.hasOwnProperty(t),"Requested tweet image size "+t+" exists.");var a=h[t];if(e&&d(e)){var r=new window.URL(e),s=u.a.parse(r.search.substring(1)),c=p(r.pathname),f=c.split(":"),_=i()(f,2),v=_[0],g=_[1];v&&(r.pathname=r.pathname.substring(0,r.pathname.lastIndexOf("."))),s.format||!n&&!v||(s.format=n||m[v]||v),s.name||!a&&!g||(s.name=a||g);var w=u.a.stringify(o(s));return r.search=w?"?"+w:"",r.toString()}return e&&e.indexOf("?")>-1?e:a?e+":"+a:e}}});