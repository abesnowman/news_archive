webpackJsonp(["loader.SearchBox"],{"98Tz":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=a("Dd8w"),n=a.n(o),r=a("Zx67"),i=a.n(r),s=a("Zrlr"),u=a.n(s),c=a("wxAW"),l=a.n(c),d=a("zwoO"),p=a.n(d),h=a("Pf15"),f=a.n(h),y=a("GiK3"),_=a.n(y),m=a("4n+p"),b=a("7t5w"),v={scribeAction:b.d},w=Object(m.connect)(null,v),g=a("bgPG"),C=a("zEXV"),S=a("KSGD"),x=a("C3D3"),D=a("WgQH"),T=a("jYKd"),R=a.n(T),I={searchBox:"searchBox"},F=a("R8Av"),k=a("4vsE"),E=a.n(k),q=a("F8kA"),M=a("6PFH");a.d(t,"SearchBoxContainer",function(){return Q});var O=a("qa/R"),P=O.formatMessage("Search Twitter"),N=O.messageFormatter('Search for "{query}"'),B=O.messageFormatter("Go to @{screenName}"),L={component:"search_box"},V=/^(\w+)$/,j=[M.a.Events,M.a.Users,M.a.Topics],U=[M.a.Users,M.a.Topics],W=function(e){return"@"===e[0]?e.substring(1):e},Q=function(e){function t(e,a){u()(this,t);var o=p()(this,(t.__proto__||i()(t)).call(this,e,a));o._getTopicExactMatch=function(e){var t=e.query,a=e.hasResults,o=e.isLoaded;return a||!o?void 0:{id:t+"_no_result_topic",type:M.b.NoResult,data:{text:N({query:t}),type:"topic"}}},o._getUserExactMatch=function(e){var t=e.query,a=(e.hasResults,e.isLoaded,W(t));if(a.match(V))return{id:t+"_no_result_user",type:M.b.NoResult,data:{text:B({screenName:a}),type:"user"}}},o._handleOnFocus=function(){var e=o.props.history,t=e.location,a=t.state||{};if(!a.searchFocused){var r=n()({},t,{state:n()({},a,{searchFocused:!0,lockScroll:!0})});e.push(r)}},o._handleChange=function(e){o.setState({query:e,querySubmitted:!1})},o._handleTypeaheadSubmit=function(e){var t=o.state.query;/^\s+$/.test(t)||o._submitQuery(t)},o._handleItemClick=function(e,t){var a=o.props,r=a.scribeAction,i=a.scribeNamespace,s=o.state.query;switch(e.type){case M.b.User:o._routeTransition({pathname:"/"+e.data.screen_name}),r(n()({},i,{element:"typeahead",action:"profile_click"}),{items:[D.a.forTypeaheadResult(e,t,s)]});break;case M.b.Topic:case M.b.Hashtag:o._submitQuery(e.data.topic,x.a.TypeaheadClick),r(n()({},i,{element:"typeahead",action:"search"}),{items:[D.a.forTypeaheadResult(e,t,s)]});break;case M.b.Event:e.data&&e.data.url?o._routeTransition({pathname:C.a.parseInternalUrl(e.data.url)}):o._submitQuery(e.data.topic,x.a.TypeaheadClick);break;case M.b.NoResult:var u=e.data.type;"user"===u?o._routeTransition({pathname:"/"+W(s)}):"topic"===u&&o._submitQuery(s,x.a.TypeaheadClick)}},o._routeTransition=function(e){var t=e.pathname,a=e.query,r=e.src,i=o.props,s=i.history,u=i.location,c=n()({},u,{pathname:t,search:"",query:a?{q:a,src:r}:{},state:n()({},u.state,{searchFocused:!1,lockScroll:!1})});s.replace(c)},o._submitQuery=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:x.a.Typed,a=o.props,n=a.onSubmit,r=a.searchRoute;n&&n(e,t),o._routeTransition({pathname:r,query:e,src:t}),o.setState({querySubmitted:!0})};var r=o.context.featureSwitch;return o.state={query:e.initialValue,querySubmitted:!0},o._eventsTypeaheadEnabled=r&&r.isTrue("responsive_web_typeahead_events_enabled"),o}return f()(t,e),l()(t,[{key:"componentWillMount",value:function(){var e=this.props.location.state||{},t=e.searchFocused;this._autoFocus=!!t}},{key:"componentWillReceiveProps",value:function(e){this.props.initialValue!==e.initialValue&&this.setState({query:e.initialValue,querySubmitted:!0})}},{key:"componentWillUpdate",value:function(){var e=this.props,t=e.history,a=e.initialValue,o=t.location,n=o.state||{},r=n.searchFocused,i=this.state,s=i.query,u=i.querySubmitted;r||s===a||u||this.setState({query:a,querySubmitted:!0})}},{key:"render",value:function(){var e=this.props,t=e.withTypeahead,a=e.initialValue,o=e.placeholder,n=this.state.query;return _.a.createElement(E.a,{style:G.root},_.a.createElement(F.a,{autoFocus:this._autoFocus,filter:this._eventsTypeaheadEnabled?j:U,getTopicExactMatch:t&&n?this._getTopicExactMatch:void 0,getUserExactMatch:t&&n?this._getUserExactMatch:void 0,initialValue:a,inputStyle:G.input,onFocus:this._handleOnFocus,onItemClick:this._handleItemClick,onQueryChange:this._handleChange,onSubmit:this._handleTypeaheadSubmit,placeholder:o,rounded:!0,shouldClearOnSelect:!0,shouldDeferPrefetch:!0,source:M.c.SearchBox,testID:I.searchBox,withFixedPositioning:!0,withFocusStyling:!0,withTypeahead:t}))}}]),t}(_.a.Component);Q.contextTypes={featureSwitch:S.object},Q.defaultProps={initialValue:"",placeholder:P,searchRoute:"/search",withTypeahead:!0};var G=R.a.create(function(e){return{root:{alignItems:"stretch",flexBasis:0,flexDirection:"row",flexGrow:1,marginVertical:e.spaces.xSmall},input:{flexShrink:1}}});t.default=Object(q.withRouter)(Object(g.b)(L)(w(Q)))},R8Av:function(e,t,a){"use strict";var o=a("Zx67"),n=a.n(o),r=a("Zrlr"),i=a.n(r),s=a("wxAW"),u=a.n(s),c=a("zwoO"),l=a.n(c),d=a("Pf15"),p=a.n(d),h=a("MqZR"),f=a("4n+p"),y=a("7t5w"),_={scribeAction:y.d},m=Object(f.connect)(null,_),b=a("bgPG"),v=a("gKtD"),w=a.n(v),g=a("/YPJ"),C=a.n(g),S=a("slmD"),x=a("XTXy"),D=a("GiK3"),T=a.n(D),R=a("O27J"),I=a.n(R),F=(a("uwYN"),a("cxKw")),k=(a("KSGD"),a("7c4V")),E=a("Xwuh"),q=a.n(E),M=a("jYKd"),O=a.n(M),P=a("6PFH"),N=a("4vsE"),B=a.n(N),L=(a("k2ao"),a("UWEf")),V=L.formatMessage("Search Text"),j={color:"blue",size:"normal"},U={size:"normal"},W=T.a.createElement(w.a,null),Q=Object(S.a)(function(e){return{bottom:0,position:"fixed",top:e+"px",transform:[{translate3d:"0,0,0"}]}}),G=function(e){function t(e,a){i()(this,t);var o=l()(this,(t.__proto__||n()(t)).call(this,e));return o._render=function(e){var t=e.windowWidth,a=o.props,n=a.alwaysOpen,r=a.filter,i=a.getItemDisabledMessage,s=a.getItemIsDisabled,u=a.getTopicExactMatch,c=a.getUserExactMatch,l=a.injectedItems,d=a.inputStyle,p=a.isModal,f=a.maxEvents,y=a.maxTopics,_=a.placeholder,m=a.renderEmptyState,b=a.rounded,v=a.selectedItems,w=a.shouldAutoFocus,g=a.shouldDeferPrefetch,S=a.shouldFocusOnClear,x=a.source,D=a.style,R=a.testID,I=a.withFixedPositioning,k=a.withFocusStyling,E=a.withSectionDivider,q=a.withTypeahead,M=t>=O.a.theme.breakpoints.medium,P=o.state.dropdownOffset,N=p?K.modalDropdown:[K.dropdown,!M&&I&&P?Q(P):null,M&&K.wideModeDropdown],L=o.state.showTypeaheadDropdown,G=[K.inputContainer,b&&K.rounded,L&&k&&K.inputContainerFocused,d];return T.a.createElement(B.a,{accessibilityRole:"form",action:"#",onKeyDown:o._handleKeyDown,onLayout:o._handleLayout,onMouseLeave:o._handleMouseLeave,onSubmit:o._handleFormSubmit,ref:o._setRootContainerNode,style:[K.root,D]},T.a.createElement(B.a,{ref:o._setInputContainerNode,style:G},T.a.createElement(h.a,{Icon:C.a,appText:L&&k?j:U,"aria-label":V,ariaActiveDescendant:o.state.ariaDescendantId,ariaRole:"textbox",autoFocus:w,clearButtonColor:L&&k?"blue":"deepGray",clearButtonIcon:b?W:void 0,focusOnClear:S,iconStyle:L?K.iconFocused:K.iconUnfocused,onChange:o._handleInputChange,onClear:o._handleInputClear,onFocus:o._handleInputFocus,onLayout:o._handleInputLayoutChanged,placeholder:_,ref:o._setInputRef,rounded:!1,testID:R,value:o.state.query,withClearButton:o.state.showTypeaheadDropdown})),T.a.createElement(B.a,{style:K.typeaheadContainer},(o.state.showTypeaheadDropdown||n)&&q?T.a.createElement(F.a,{ariaDescendantId:o.state.ariaDescendantId,filter:r,getItemDisabledMessage:i,getItemIsDisabled:s,getTopicExactMatch:u,getUserExactMatch:c,injectedItems:l,maxEvents:f,maxTopics:y,onItemClick:o._handleItemClick,onItemFocusChanged:o._handleItemFocusChanged,onRef:o._handleTypeaheadRef,query:o.state.query,renderEmptyState:m,selectedItems:v,shouldDeferPrefetch:g,shouldRenderEmptyState:!o.state.query,source:x,style:N,withSectionDivider:E}):null))},o._handleLayout=function(){o._updatePosition()},o._handleInputLayoutChanged=function(){o._updatePosition()},o._updatePosition=function(){if(o._inputContainerNode){var e=o._inputContainerNode.getBoundingClientRect(),t=e.bottom;t!==o.state.dropdownOffset&&o.setState({dropdownOffset:t})}},o._handleTypeaheadRef=function(e){o._typeaheadRef=e},o._setRootContainerNode=function(e){o._rootContainerNode=I.a.findDOMNode(e)},o._setInputRef=function(e){o._inputRef=e},o._setInputContainerNode=function(e){o._inputContainerNode=I.a.findDOMNode(e),o._inputContainerNode&&o._updatePosition()},o._handleMouseLeave=function(){o._typeaheadRef&&o._typeaheadRef.clearFocus()},o._handleFocusChange=function(e){o._rootContainerNode&&o._rootContainerNode.contains(e.target)||o.state.showTypeaheadDropdown&&(o._typeaheadRef&&o._typeaheadRef.clearFocus(),o.setState({showTypeaheadDropdown:!1}))},o._handleKeyDown=function(e){var t=e.key,a=o.state.showTypeaheadDropdown;Object(k.d)(e)&&("ArrowDown"===t?(o._typeaheadRef&&o._typeaheadRef.focusNext(),e.preventDefault()):"ArrowUp"===t?(o._typeaheadRef&&o._typeaheadRef.focusPrevious(),e.preventDefault()):a||o.setState({showTypeaheadDropdown:!0}))},o._handleItemFocusChanged=function(){o.setState({ariaDescendantId:Object(k.a)()})},o._handleInputClear=function(){o._updateQuery("")},o._handleInputFocus=function(){o.setState({showTypeaheadDropdown:!0}),o._updatePosition(),o.props.onFocus&&o.props.onFocus()},o._handleInputChange=function(e){o._updateQuery(e.target.value),o._updatePosition()},o._updateQuery=function(e){o.setState({query:e}),o.props.onQueryChange&&o.props.onQueryChange(e)},o._handleFormSubmit=function(e){e.preventDefault(),e.stopPropagation(),o._inputRef&&o._inputRef.blur(),o.setState({showTypeaheadDropdown:!1}),o.props.onSubmit&&o.props.onSubmit()},o._handleItemClick=function(e,t){var a=o.props,n=a.shouldClearOnSelect,r=a.shouldFocusOnClear,i=n?"":o.state.query;o._typeaheadRef&&o._typeaheadRef.clearFocus(),o.setState({showTypeaheadDropdown:!1}),o._inputRef&&(n&&r?o._inputRef.focus():o._inputRef.blur()),o._updateQuery(i),o.props.onItemClick(e,t)},o.state={ariaDescendantId:Object(k.a)(),query:e.initialValue,showTypeaheadDropdown:!1},o}return p()(t,e),u()(t,[{key:"componentWillReceiveProps",value:function(e){this.props.initialValue!==e.initialValue&&this._updateQuery(e.initialValue)}},{key:"componentDidMount",value:function(){window.document.addEventListener("click",this._handleFocusChange,!0)}},{key:"componentWillUnmount",value:function(){window.document.removeEventListener("click",this._handleFocusChange,!0)}},{key:"render",value:function(){return T.a.createElement(q.a,null,this._render)}},{key:"focus",value:function(){this._inputRef.focus()}}]),t}(T.a.Component);G.defaultProps={filter:[P.a.Users,P.a.Topics],initialValue:"",withSectionDivider:!0,withTypeahead:!0};var K=O.a.create(function(e){return{root:{flex:1,flexDirection:"column",position:"relative",zIndex:x.b+1},typeaheadContainer:{flex:1,position:"relative"},inputContainer:{backgroundColor:e.colors.fadedGray,borderColor:e.colors.fadedGray,borderStyle:"solid",borderWidth:e.borderWidths.small},inputContainerFocused:{backgroundColor:e.colors.cellBackground,borderColor:e.colors.blue},rounded:{borderRadius:e.borderRadii.infinite},iconUnfocused:{color:e.colors.deepGray},iconFocused:{color:e.colors.blue},dropdown:{backgroundColor:e.colors.cellBackground,left:0,right:0,overflowY:"auto",overscrollBehavior:"contain",position:"absolute",top:0,WebkitOverflowScrolling:"touch"},modalDropdown:{backgroundColor:e.colors.cellBackground,flex:1,minHeight:300,position:"relative",overflowY:"auto",overscrollBehavior:"auto",WebkitOverflowScrolling:"touch"},wideModeDropdown:{borderRadius:e.borderRadii.medium,boxShadow:"0 0 8px 0 rgba(0,0,0,0.12), 0 8px 8px 0 rgba(0,0,0,0.24)",minHeight:100,maxHeight:"calc(80vh - "+e.componentDimensions.appBarHeight+")"}}});t.a=Object(b.b)()(m(G))},gKtD:function(e,t,a){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a("Dd8w"),r=o(n),i=a("eVdM"),s=o(i),u=a("GiK3"),c=o(u),l=a("sT3W"),d=o(l),p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,s.default)("svg",(0,r.default)({},e,{style:[d.default.root,e.style],viewBox:"0 0 24 24"}),c.default.createElement("g",null,c.default.createElement("path",{d:"M12 1.25C6.072 1.25 1.25 6.072 1.25 12S6.072 22.75 12 22.75 22.75 17.928 22.75 12 17.928 1.25 12 1.25zm3.855 13.545a.749.749 0 1 1-1.06 1.06L12 13.062l-2.795 2.796a.748.748 0 0 1-1.06 0 .749.749 0 0 1 0-1.06L10.94 12 8.144 9.205a.749.749 0 1 1 1.06-1.06L12 10.938l2.795-2.796a.749.749 0 1 1 1.06 1.06L13.062 12l2.795 2.795z"})))};p.metadata={height:24,width:24},t.default=p}});