webpackJsonp(["loader.AppModules"],{DOzz:function(e,t,n){"use strict";n.d(t,"a",function(){return s}),n.d(t,"c",function(){return u}),n.d(t,"b",function(){return d}),n.d(t,"d",function(){return p});var r=n("sp77"),i=n.n(r),o=n("4fSK"),a=n("zEXV"),s={Web:0,Email:1,Partner:2,Market:3,Access:4},c={"01":"twcamp^share|twsrc^android|twgr^sms","02":"twcamp^share|twsrc^android|twgr^email","03":"twcamp^share|twsrc^android|twgr^gmail","04":"twcamp^share|twsrc^android|twgr^facebook","05":"twcamp^share|twsrc^android|twgr^wechat","06":"twcamp^share|twsrc^android|twgr^line","07":"twcamp^share|twsrc^android|twgr^fbmessenger","08":"twcamp^share|twsrc^android|twgr^whatsapp","09":"twcamp^share|twsrc^android|twgr^other",10:"twcamp^share|twsrc^ios|twgr^sms",11:"twcamp^share|twsrc^ios|twgr^email",12:"twcamp^share|twsrc^ios|twgr^other",13:"twcamp^share|twsrc^android|twgr^download",14:"twcamp^share|twsrc^ios|twgr^download",15:"twcamp^share|twsrc^android|twgr^hangouts",16:"twcamp^share|twsrc^android|twgr^twitterdm",17:"twcamp^share|twsrc^m5|twgr^email",18:"twcamp^share|twsrc^m5|twgr^download",19:"twcamp^share|twsrc^android|twgr^copy",20:"twcamp^share|twsrc^m5|twgr^copy",21:"twcamp^share|twsrc^ios|twgr^copy"},u=function(e){var t=e.query,n=void 0===t?{}:t,r=e.httpReferer,i=void 0===r?"":r,o=e.carrierInfo,u=void 0===o?{}:o,l=e.requestUrl,d=void 0===l?"":l,p=n.cn,h=n.iid,f=n.original_referer,m=n.nid,v=n.ref_src,b=n.ref_url,_=n.s,y=n.partner,w=n.uid,g=n.url,k={};if(v)k={referral_type:s.Web,referral_details_str:v,url:d};else if(h){var S=void 0;try{S=window.atob(p)}catch(e){S="invalid"}k={referral_type:s.Email,referral_details_str:"twcamp^email|twsrc^"+m+"|twcon^"+w+"|twterm^"+h+"|twgr^"+S,url:d}}else if(_){var E=c[_];k=E?{referral_type:s.Web,referral_details_str:E,url:d}:{}}else if(y)k={referral_type:s.Partner,referral_details_str:"twsrc^"+y,url:d};else if(u&&void 0!==u.accessBannerFlag&&u.carrierKey){var T=function(e,t){return"twsrc^$ZeroRateCampaign|twgr^"+e+"|twterm^"+t}(u.accessBannerFlag?"banner":"no_banner",u.carrierKey);k={referral_type:s.Access,referral_details_str:T,url:d}}else i&&a.a.isExternalUrl(i)&&(k={referral_type:s.Web,url:d});var C=b||f||g||i;return C&&(k.referer=C),k},l=function(e){var t=e&&e.encryptedReferralDetails||"",n=e&&e.encryptedReferer||"",r=e&&""+e.referralType||"";if(t||n||r)return encodeURIComponent(n)+"|"+r+"|"+encodeURIComponent(t)},d=function(e){var t=l(e);if(t)return i.a.serialize("external_referer",t,{maxAge:604800,path:"/",domain:".twitter.com",encode:function(e){return e}})},p=function(){var e=Object(o.a)("external_referer");if(e&&e.split("|").length>1){var t=e.split("|");return{encryptedReferer:t[0],referralType:t[1],encryptedReferralDetails:t[2]}}return{}}},G3YD:function(e,t,n){"use strict";n.d(t,"c",function(){return b}),n.d(t,"b",function(){return _});var r=n("sp77"),i=n.n(r),o=n("/FRN"),a=(n.n(o),n("czSA")),s=n.n(a),c=n("1rqZ"),u=n("GiK3"),l=n.n(u),d=n("Mpbj"),p=n.n(d),h=n("jYKd"),f=n.n(h);n("SElP");var m=n("CYoy"),v=m.FormatMessage,b=function(e,t,n){var r=e.indexOf(t.toLowerCase())>-1,i=n[o.EU_NOTICE_COOKIE];return r&&"1"!==i},_=function(e){s.a.canUseDOM&&(document.cookie=i.a.serialize(o.EU_NOTICE_COOKIE,"1",{maxAge:31536e3,path:"/",domain:".twitter.com"}))},y=function(){return l.a.createElement(p.a,{color:"white",size:"small"},l.a.createElement(v,{elements:{cookieHelp:l.a.createElement(c.a,{href:"https://help.twitter.com/rules-and-policies/twitter-cookies",style:w.link})}},"By using Twitter's services you agree to our [cookieHelp]Cookies Use[/cookieHelp]. We and our partners operate globally and use cookies, including for analytics, personalisation, and ads."))},w=f.a.create(function(e){return{link:{color:e.colors.white,textDecorationLine:"underline"}}});t.a=y},aKwu:function(e,t,n){"use strict";var r=n("Zx67"),i=n.n(r),o=n("Zrlr"),a=n.n(o),s=n("wxAW"),c=n.n(s),u=n("zwoO"),l=n.n(u),d=n("Pf15"),p=n.n(d),h=n("GiK3"),f=n.n(h),m=n("sp77"),v=n.n(m),b=n("/FRN"),_=n("ZJEh"),y=n("4fSK"),w={loginButton:"login-button"},g=n("ree2"),k=n.n(g),S=n("fF1d"),E=n.n(S),T=n("jYKd"),C=n.n(T),O=n("eVdM"),I=n.n(O),L=n("4vsE"),D=n.n(L),x=n("YHdh"),A=x.formatMessage("Log in"),P=function(e){function t(){var e,n,r,o;a()(this,t);for(var s=arguments.length,c=Array(s),u=0;u<s;u++)c[u]=arguments[u];return n=r=l()(this,(e=t.__proto__||i()(t)).call.apply(e,[this].concat(c))),r._mobileLoginToken=k.a.v1().replace(/-/g,""),r._handleSubmit=function(){r._setLoginCookie()},r._handleSubmitButtonClick=function(){r._form&&(r._setLoginCookie(),r._form.submit())},r._setFormRef=function(e){r._form=e},o=n,l()(r,o)}return p()(t,e),c()(t,[{key:"componentDidUpdate",value:function(e){this.props.autoSubmit&&!e.autoSubmit&&this._handleSubmitButtonClick()}},{key:"componentDidMount",value:function(){_.a.inject("https://twitter.com/i/js_inst?c_name=ui_metrics")}},{key:"render",value:function(){var e=this.props,t=e.children,n=e.formActionUrl,r=e.horizontalLayout,i=e.loginReturnPath,o=e.submitButtonLabel,a=e.submitButtonSize,s=e.submitButtonStyle,c=e.submitButtonType,u=""+(i||"/"),l=f.a.createElement(D.a,{style:r&&R.horizontalFields},f.a.createElement("input",{name:"redirect_after_login",type:"hidden",value:u}),f.a.createElement("input",{name:"remember_me",type:"hidden",value:"1"}),f.a.createElement("input",{name:"authenticity_token",type:"hidden",value:this._mobileLoginToken}),f.a.createElement("input",{name:"wfa",type:"hidden",value:"1"}),f.a.createElement("input",{autoComplete:"off",name:"ui_metrics",type:"hidden"}),f.a.createElement("input",{style:{display:"none"},type:"submit"}),t,f.a.createElement(E.a,{onPress:this._handleSubmitButtonClick,size:a,style:s,testID:w.loginButton,type:c},o));return I()("form",{action:n,children:l,method:"post",onSubmit:this._handleSubmit,ref:this._setFormRef,style:R.loginForm})}},{key:"_setLoginCookie",value:function(){var e=new Date(Date.now());e.setTime(e.getTime()+3e5),Object(y.b)(v.a.serialize(b.MOBILE_LOGIN_COOKIE,this._mobileLoginToken,{domain:void 0,expires:e,path:"/",secure:!0}))}}]),t}(f.a.Component);P.defaultProps={autoSubmit:!1,formActionUrl:"/sessions",submitButtonLabel:A,submitButtonType:"primary"};var R=C.a.create(function(e){return{horizontalFields:{flexDirection:"row",justifyContent:"center",alignItems:"flex-start"},loginForm:{width:"100%"}}});t.a=P},gkmO:function(e,t,n){"use strict";var r=n("Zx67"),i=n.n(r),o=n("Zrlr"),a=n.n(o),s=n("wxAW"),c=n.n(s),u=n("zwoO"),l=n.n(u),d=n("Pf15"),p=n.n(d),h=n("GiK3"),f=n.n(h),m=n("4n+p"),v=n("bndy"),b=n("y7g/"),_=Object(v.createSelector)(b.m,function(e){return{currentCountry:e}}),y=Object(m.connect)(_),w=y,g=n("sp77"),k=n.n(g),S=n("czSA"),E=n.n(S),T=n("Dd8w"),C=n.n(T),O=n("4vsE"),I=n.n(O),L=n("KSGD"),D=n("fF1d"),x=n.n(D),A=n("xCV+"),P=n.n(A),R=n("Y+mP"),M=n.n(R),B=n("Xwuh"),K=n.n(B),U=n("jYKd"),j=n.n(U),N=n("Bbgh"),F=N.formatMessage("Close"),z=function(e){function t(){return a()(this,t),l()(this,(t.__proto__||i()(t)).apply(this,arguments))}return p()(t,e),c()(t,[{key:"render",value:function(){var e=this.props,t=e.children,n=e.onClose,r=e.closeLabel;return f.a.createElement(M.a.Persistent,null,f.a.createElement(K.a,null,function(e){var i=e.windowWidth,o=j.a.theme.breakpoints.isWide(i),a=o?I.a:P.a;return f.a.createElement(I.a,{style:[G.root,o&&W.root]},f.a.createElement(a,{style:[G.container,o&&W.container]},t),f.a.createElement(I.a,{style:[o&&W.closeButtonContainer]},f.a.createElement(x.a,{onPress:n,size:"normalCompact",style:[G.closeButton,o&&W.closeButton],type:"invertedSecondary"},r)))}))}}]),t}(f.a.Component);z.defaultProps={closeLabel:F};var G=j.a.create(function(e){return{root:C()({},e.boxShadow,{backgroundColor:e.colors.deepGray,padding:e.spaces.xSmall,width:"100%"}),container:{alignItems:"center"},closeButton:{marginTop:e.spaces.xSmall}}}),W=j.a.create(function(e){return{root:{flexDirection:"row"},container:{alignItems:"flex-start",flexGrow:1,flexShrink:1,justifyContent:"center"},closeButtonContainer:{justifyContent:"center"},closeButton:{marginTop:0,flexGrow:0,flexShrink:0}}}),q=z,Y=n("2myN"),V=n("G3YD"),Q=function(e){function t(){var e,n,r,o;a()(this,t);for(var s=arguments.length,c=Array(s),u=0;u<s;u++)c[u]=arguments[u];return n=r=l()(this,(e=t.__proto__||i()(t)).call.apply(e,[this].concat(c))),r.state={euWarningIsOpen:!1},r._handleEUBannerClose=function(){Object(V.b)(),r.setState({euWarningIsOpen:!1})},o=n,l()(r,o)}return p()(t,e),c()(t,[{key:"componentWillMount",value:function(){var e=this.context.featureSwitch,t=this.props.currentCountry,n=e&&e.getValue("responsive_web_eu_countries")||[],r=E.a.canUseDOM?k.a.parse(document.cookie):{};this.setState({euWarningIsOpen:Object(V.c)(n,t,r)})}},{key:"render",value:function(){return!this.props.hideEUBanner&&this.state.euWarningIsOpen?f.a.createElement(q,{onClose:this._handleEUBannerClose},f.a.createElement(V.a,null)):null}}]),t}(f.a.PureComponent);Q.contextTypes={featureSwitch:L.object,loggedInUserId:L.string},Q.defaultProps={hideEUBanner:!1};t.a=Object(Y.a)(w(Q))},knr3:function(e,t,n){var r;!function(i,o,a){function s(e,t,n){if(e.addEventListener)return void e.addEventListener(t,n,!1);e.attachEvent("on"+t,n)}function c(e){if("keypress"==e.type){var t=String.fromCharCode(e.which);return e.shiftKey||(t=t.toLowerCase()),t}return g[e.which]?g[e.which]:k[e.which]?k[e.which]:String.fromCharCode(e.which).toLowerCase()}function u(e,t){return e.sort().join(",")===t.sort().join(",")}function l(e){var t=[];return e.shiftKey&&t.push("shift"),e.altKey&&t.push("alt"),e.ctrlKey&&t.push("ctrl"),e.metaKey&&t.push("meta"),t}function d(e){if(e.preventDefault)return void e.preventDefault();e.returnValue=!1}function p(e){if(e.stopPropagation)return void e.stopPropagation();e.cancelBubble=!0}function h(e){return"shift"==e||"ctrl"==e||"alt"==e||"meta"==e}function f(){if(!w){w={};for(var e in g)e>95&&e<112||g.hasOwnProperty(e)&&(w[g[e]]=e)}return w}function m(e,t,n){return n||(n=f()[e]?"keydown":"keypress"),"keypress"==n&&t.length&&(n="keydown"),n}function v(e){return"+"===e?["+"]:(e=e.replace(/\+{2}/g,"+plus"),e.split("+"))}function b(e,t){var n,r,i,o=[];for(n=v(e),i=0;i<n.length;++i)r=n[i],E[r]&&(r=E[r]),t&&"keypress"!=t&&S[r]&&(r=S[r],o.push("shift")),h(r)&&o.push(r);return t=m(r,o,t),{key:r,modifiers:o,action:t}}function _(e,t){return null!==e&&e!==o&&(e===t||_(e.parentNode,t))}function y(e){function t(e){e=e||{};var t,n=!1;for(t in w)e[t]?n=!0:w[t]=0;n||(S=!1)}function n(e,t,n,r,i,o){var a,s,c=[],l=n.type;if(!v._callbacks[e])return[];for("keyup"==l&&h(e)&&(t=[e]),a=0;a<v._callbacks[e].length;++a)if(s=v._callbacks[e][a],(r||!s.seq||w[s.seq]==s.level)&&l==s.action&&("keypress"==l&&!n.metaKey&&!n.ctrlKey||u(t,s.modifiers))){var d=!r&&s.combo==i,p=r&&s.seq==r&&s.level==o;(d||p)&&v._callbacks[e].splice(a,1),c.push(s)}return c}function r(e,t,n,r){v.stopCallback(t,t.target||t.srcElement,n,r)||!1===e(t,n)&&(d(t),p(t))}function i(e){"number"!=typeof e.which&&(e.which=e.keyCode);var t=c(e);if(t)return"keyup"==e.type&&g===t?void(g=!1):void v.handleKey(t,l(e),e)}function a(){clearTimeout(_),_=setTimeout(t,1e3)}function f(e,n,i,o){function s(n){r(i,n,e),"keyup"!==o&&(g=c(n)),setTimeout(t,10)}w[e]=0;for(var u=0;u<n.length;++u){var l=u+1===n.length,d=l?s:function(t){return function(){S=t,++w[e],a()}}(o||b(n[u+1]).action);m(n[u],d,o,e,u)}}function m(e,t,r,i,o){v._directMap[e+":"+r]=t,e=e.replace(/\s+/g," ");var a,s=e.split(" ");if(s.length>1)return void f(e,s,t,r);a=b(e,r),v._callbacks[a.key]=v._callbacks[a.key]||[],n(a.key,a.modifiers,{type:a.action},i,e,o),v._callbacks[a.key][i?"unshift":"push"]({callback:t,modifiers:a.modifiers,action:a.action,seq:i,level:o,combo:e})}var v=this;if(e=e||o,!(v instanceof y))return new y(e);v.target=e,v._callbacks={},v._directMap={};var _,w={},g=!1,k=!1,S=!1;v._handleKey=function(e,i,o){var a,s=n(e,i,o),c={},u=0,l=!1;for(a=0;a<s.length;++a)s[a].seq&&(u=Math.max(u,s[a].level));for(a=0;a<s.length;++a)if(s[a].seq){if(s[a].level!=u)continue;l=!0,c[s[a].seq]=1,r(s[a].callback,o,s[a].combo,s[a].seq)}else l||r(s[a].callback,o,s[a].combo);var d="keypress"==o.type&&k;o.type!=S||h(e)||d||t(c),k=l&&"keydown"==o.type},v._bindMultiple=function(e,t,n){for(var r=0;r<e.length;++r)m(e[r],t,n)},s(e,"keypress",i),s(e,"keydown",i),s(e,"keyup",i)}if(i){for(var w,g={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},k={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},S={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},E={option:"alt",command:"meta",return:"enter",escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},T=1;T<20;++T)g[111+T]="f"+T;for(T=0;T<=9;++T)g[T+96]=T.toString();y.prototype.bind=function(e,t,n){var r=this;return e=e instanceof Array?e:[e],r._bindMultiple.call(r,e,t,n),r},y.prototype.unbind=function(e,t){var n=this;return n.bind.call(n,e,function(){},t)},y.prototype.trigger=function(e,t){var n=this;return n._directMap[e+":"+t]&&n._directMap[e+":"+t]({},e),n},y.prototype.reset=function(){var e=this;return e._callbacks={},e._directMap={},e},y.prototype.stopCallback=function(e,t){var n=this;return!((" "+t.className+" ").indexOf(" mousetrap ")>-1)&&(!_(t,n.target)&&("INPUT"==t.tagName||"SELECT"==t.tagName||"TEXTAREA"==t.tagName||t.isContentEditable))},y.prototype.handleKey=function(){var e=this;return e._handleKey.apply(e,arguments)},y.addKeycodes=function(e){for(var t in e)e.hasOwnProperty(t)&&(g[t]=e[t]);w=null},y.init=function(){var e=y(o);for(var t in e)"_"!==t.charAt(0)&&(y[t]=function(t){return function(){return e[t].apply(e,arguments)}}(t))},y.init(),i.Mousetrap=y,void 0!==e&&e.exports&&(e.exports=y),void 0!==(r=function(){return y}.call(t,n,t,e))&&(e.exports=r)}}("undefined"!=typeof window?window:null,"undefined"!=typeof window?document:null)},tlGN:function(e,t,n){"use strict";function r(e){rt[e]=!0;var t=nt.filter(function(e){return(0,e.matches)()}),n=nt.filter(function(e){return!(0,e.matches)()});nt=n,t.forEach(function(e){return(0,e.callback)()})}function i(e,t){var n=Ve()(e),r=!1,i=void 0,o=function(){r||(i=bt()(t),n.forEach(function(t){return i.bind(t,_t(e[t]))}))},a=function(){r=!0,ht(o),i&&i.unbind(n)};return dt(o,[Je,$e]),a}function o(e){return Xt()(e)[0]}function a(e){return Xt()(e.data).find(function(e){return e&&"string"==typeof e.__typename&&"SubscriptionStatus"===e.__typename})}function s(e){var t=a(e);return t&&"string"==typeof t.live_pipeline_topic?t.live_pipeline_topic:""}function c(e){return e*(.5+Math.random())}function u(e,t,n){n=Math.max(1,n);var r=Math.pow(2,n-1);return Math.max(e,Math.min(e*r,t))}function l(e){return e.json().then(function(e){return e.errors.some(function(e){return e.code===$t})})}function d(e){var t=e.promiseFactory,n=e.condition,r=e.sideEffect;return function(){var e=t.apply(void 0,arguments);return e.then(n).then(function(e){e&&r()}).then(function(){return e},function(){return e})}}function p(e){return Ve()(f(e))}function h(e,t){var n=f(e),r=Ve()(n),i=p(t);return r.length===i.length&&i.every(function(e){return n[e]})}function f(e){return e.reduce(function(e,t){return e[t]=!0,e},{})}Object.defineProperty(t,"__esModule",{value:!0});var m={};n.d(m,"initialize",function(){return st}),n.d(m,"detectedTypes",function(){return ct}),n.d(m,"detectedType",function(){return ut}),n.d(m,"register",function(){return lt}),n.d(m,"registerSome",function(){return dt}),n.d(m,"registerEvery",function(){return pt}),n.d(m,"unregister",function(){return ht}),n.d(m,"reset",function(){return ft}),n.d(m,"KEYBOARD",function(){return Je}),n.d(m,"MOUSE",function(){return $e}),n.d(m,"_private",function(){return mt});var v=n("gkmO"),b=n("Zx67"),_=n.n(b),y=n("Zrlr"),w=n.n(y),g=n("wxAW"),k=n.n(g),S=n("zwoO"),E=n.n(S),T=n("Pf15"),C=n.n(T),O=n("GiK3"),I=n.n(O),L=n("MKQE"),D=n("4vsE"),x=n.n(D),A=n("Mpbj"),P=n.n(A),R=n("xCV+"),M=n.n(R),B=n("jYKd"),K=n.n(B),U=function(e){function t(){return w()(this,t),E()(this,(t.__proto__||_()(t)).apply(this,arguments))}return C()(t,e),k()(t,[{key:"render",value:function(){var e=this.props,t=e.children,n=e.onAction,r=e.onClose;return I.a.createElement(x.a,{style:j.root},I.a.createElement(M.a,{style:j.container,withGutter:!0},I.a.createElement(P.a,{accessibilityRole:"button",color:"white",numberOfLines:1,onPress:n,size:"small",style:j.actionText},t),I.a.createElement(L.a,{color:"white",onClose:r,size:"small"})))}}]),t}(I.a.Component);U.defaultProps={onAction:function(){}};var j=K.a.create(function(e){return{root:{backgroundColor:e.colors.blue},container:{alignItems:"center",flexDirection:"row",height:e.spaces.xLarge,justifyContent:"space-between"},actionText:{width:"100%"}}}),N=U,F=n("4n+p"),z=n("bndy"),G=n("OMex"),W=Object(z.createSelector)(G.j,function(e){return{dtabAll:e&&e.dtabAll,dtabRweb:e&&e.dtabRweb,hide:e&&e.hide,ttsToken:e&&e.ttsToken}}),q=Object(F.connect)(W,null),Y=n("zEXV"),V=function(e){function t(e,n){w()(this,t);var r=E()(this,(t.__proto__||_()(t)).call(this,e,n));return r._handleClear=function(){var e=r.props,t=e.dtabAll,n=e.ttsToken,i=[];t&&!n?i=t:n&&(i=["TTS: "+n]);var o=i.filter(function(e){return!!e}).join("\n"),a="OK to clear overrides?\n"+o;window.confirm(a)&&Y.a.navigateTo("/?dtab_local=&tts_token=")},r._handleClose=function(){r.setState({show:!1})},r._shouldShow=function(){var e=r.props,t=e.dtabAll,n=e.ttsToken;return!(e.hide||!t&&!n)},r.state={show:r._shouldShow()},r}return C()(t,e),k()(t,[{key:"render",value:function(){var e=this.props,t=e.dtabAll,n=e.dtabRweb,r=e.ttsToken,i=r?I.a.createElement(N,{onAction:this._handleClear,onClose:this._handleClose},"Pre-release Twitter Lite. Tap here to cancel.",I.a.createElement("br",null),"Token: ",r):t&&I.a.createElement(N,{onAction:this._handleClear,onClose:this._handleClose},"Dtab override is active. Tap here to cancel.",n&&I.a.createElement("br",null),n)||null;return this.state.show&&i}}]),t}(I.a.PureComponent);V.defaultProps={hide:!1};var Q=q(V),H=n("VHBg"),X=n("Dd8w"),Z=n.n(X),J=n("7t5w"),$=n("y7g/"),ee=Object(z.createSelector)($.j,function(e){return{loginReturnPath:e}}),te={scribeAction:J.d},ne=Object(F.connect)(ee,te),re=n("bgPG"),ie=n("4fSK"),oe=n("aKwu"),ae=n("86z1"),se=n("n/Dr"),ce=n("sgb3"),ue=n.n(ce),le=n("/FRN"),de=(n("uwYN"),n("F8kA")),pe=n("KSGD"),he=["/settings","/signup","/login/error","/i/flow/signup"],fe={component:"smartlock_prompt"},me=function(e){function t(e,n){w()(this,t);var r=E()(this,(t.__proto__||_()(t)).call(this,e,n));return r.state={autoSubmit:!1,password:"",smartLockDisabled:!1,userName:""},r}return C()(t,e),k()(t,[{key:"componentWillMount",value:function(){var e=this.context,t=e.featureSwitch,n=e.loggedInUserId,r=this.props.getCookie;this._smartLockSupported=!!(window.PasswordCredential&&navigator.credentials&&navigator.credentials.get),this._smartLockEnabledAll=!n&&this._smartLockSupported&&t&&t.hasValue("responsive_web_smart_lock_7159","all"),this._smartLockEnabledLoginOnly=!n&&this._smartLockSupported&&t&&t.hasValue("responsive_web_smart_lock_7159","login_only"),this._isSmartLockDisabledFromCookie="1"===r(le.SMARTLOCK_COOKIE)}},{key:"componentDidMount",value:function(){"/login/error"===this.props.location.pathname?Object(se.a)():this._checkShouldDisplayPrompt()}},{key:"componentDidUpdate",value:function(e){ue()(e.location,this.props.location)||this._checkShouldDisplayPrompt()}},{key:"render",value:function(){var e=this.props.loginReturnPath,t=this.state,n=t.autoSubmit,r=t.password,i=t.userName;return this._shouldDisplaySmartLockPrompt()?I.a.createElement(x.a,{style:ve.hidden},I.a.createElement(oe.a,{autoSubmit:n,loginReturnPath:e},I.a.createElement("input",{name:"session[username_or_email]",type:"hidden",value:i}),I.a.createElement("input",{name:"session[password]",type:"hidden",value:r}))):null}},{key:"_scribeAction",value:function(e,t){var n=this.props,r=n.scribeAction,i=n.scribeNamespace;r(Z()({},i,t,{action:e}))}},{key:"_checkShouldDisplayPrompt",value:function(){var e=this,t=this.props.location.pathname,n=this.state.smartLockDisabled;if(this._shouldDisplaySmartLockPrompt()){this._scribeAction("impression");var r=(n||this._isSmartLockDisabledFromCookie)&&"/login"===t?"required":"optional",i=!0;setTimeout(function(){return i=!1},250),navigator.credentials.get({mediation:r,password:!0}).then(function(t){if(t){i?e._scribeAction("select",{element:"unmediated"}):e._scribeAction("select",{element:"mediated"});var n=t.id,r=t.password;e.setState({autoSubmit:!0,userName:n,password:r})}else e._smartLockEnabledAll&&e.setState({smartLockDisabled:!0},se.a),i?e._scribeAction("cancel",{element:"no_credentials"}):e._scribeAction("cancel",{element:"with_credentials"})},function(e){e&&"NotSupportedError"!==e.name&&"NotAllowedError"!==e.name&&"InvalidStateError"!==e.name&&Object(ae.a)(e)})}}},{key:"_shouldDisplaySmartLockPrompt",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,t=this.context.loggedInUserId,n=e.location.pathname,r=this.state.smartLockDisabled,i=this._smartLockEnabledAll&&("/login"===n||!this._isSmartLockDisabledFromCookie&&!r&&!he.some(function(e){return e===n})),o=this._smartLockEnabledLoginOnly&&"/login"===n;return!t&&this._smartLockSupported&&(i||o)}}]),t}(I.a.Component);me.contextTypes={loggedInUserId:pe.string,featureSwitch:pe.object},me.defaultProps={getCookie:ie.a};var ve=K.a.create(function(e){return{hidden:{display:"none"}}}),be=Object(de.withRouter)(Object(re.b)(fe)(ne(me))),_e=n("z9yJ"),ye=Object(z.createSelector)(_e.d,function(e){return{toast:e}}),we={onClose:_e.c},ge=Object(F.connect)(ye,we),ke=ge,Se=n("iuYP"),Ee=n("Dxna"),Te={root:"toast"},Ce=n("+4hS"),Oe=n("Y+mP"),Ie=n.n(Oe),Le=n("Xwuh"),De=n.n(Le),xe=function(e){function t(){var e,n,r,i;w()(this,t);for(var o=arguments.length,a=Array(o),s=0;s<o;s++)a[s]=arguments[s];return n=r=E()(this,(e=t.__proto__||_()(t)).call.apply(e,[this].concat(a))),r._renderContent=function(e){var t=e.windowWidth,n=r.props,i=n.text,o=n.withClearButton,a=K.a.theme.breakpoints.isWide(t),s=a?Ie.a.ModalToasts:Ie.a.Toasts;return I.a.createElement(s,null,I.a.createElement(M.a,null,I.a.createElement(x.a,{style:[Pe.root,t>K.a.theme.breakpoints.medium&&Pe.rootWide],testID:Te.root},I.a.createElement(P.a,{color:"white",style:Pe.titleText},i),I.a.createElement(x.a,{style:Pe.actionButtons},r._renderActionLabel(),o&&I.a.createElement(L.a,{onClose:r._handleClose,style:Pe.closeButton})))))},r._handleActionPress=function(e){r._stopTimer();var t=r.props,n=t.onAction,i=t.onClose;n&&n(e),i(e)},r._handleClose=function(e){r._stopTimer(),r.props.onClose(e)},i=n,E()(r,i)}return C()(t,e),k()(t,[{key:"componentDidMount",value:function(){this._createTimer(this.props)}},{key:"componentWillUnmount",value:function(){this._stopTimer()}},{key:"render",value:function(){return I.a.createElement(De.a,null,this._renderContent)}},{key:"_renderActionLabel",value:function(){var e=this.props,t=e.actionLabel,n=e.actionLink;if(t){var r=I.a.createElement(P.a,{children:t,color:"white",onPress:n?void 0:this._handleActionPress,style:[Pe.actionText,Pe.withBorder,!n&&Pe.actionMargin],weight:"bold",withHoverUnderline:!!n});return n?I.a.createElement(Ee.a,{children:r,link:Se.b(n),onClick:this._handleActionPress,style:[Pe.actionMargin]}):r}}},{key:"_createTimer",value:function(e){var t=e.actionLabel,n=e.autoDismissDelay,r=e.onClose,i=e.text;if(e.withAutoDismiss){var o=n||this._calculateDismissDelay(i,!!t);this._dismissTimer=new Ce.b(o).timeout(r),this._dismissTimer.start()}}},{key:"_calculateDismissDelay",value:function(e,t){var n=e.split(" ").length,r=1e3*n/5+225;return(r<4e3?4e3:r)+(t?2e3:0)}},{key:"_stopTimer",value:function(){this._dismissTimer&&this._dismissTimer.stop()}}]),t}(I.a.Component);xe.defaultProps={withAutoDismiss:!0,withClearButton:!1};var Ae,Pe=K.a.create(function(e){return{root:{alignItems:"center",backgroundColor:e.colors.blue,flexDirection:"row",justifyContent:"space-between",padding:e.spaces.xSmall},rootWide:{alignSelf:"center",borderRadius:e.borderRadii.medium,marginBottom:e.spaces.large},titleText:{flexShrink:1,paddingHorizontal:e.spaces.xSmall},actionText:{whiteSpace:"nowrap"},withActionBorder:{borderRadius:e.borderRadii.infinite,borderColor:e.colors.white,borderStyle:"solid",borderWidth:"1px",paddingVertical:e.spaces.xxSmall,paddingHorizontal:e.spaces.small},actionButtons:{flexDirection:"row"},actionMargin:{marginHorizontal:e.spaces.xSmall},closeButton:{marginLeft:e.spaces.xSmall,paddingHorizontal:e.spaces.xxSmall}}}),Re=xe,Me=function(e){function t(){return w()(this,t),E()(this,(t.__proto__||_()(t)).apply(this,arguments))}return C()(t,e),k()(t,[{key:"render",value:function(){var e=this.props,t=e.onClose,n=e.toast;return n?I.a.createElement(Re,{actionLabel:n.actionLabel,actionLink:n.actionLink,autoDismissDelay:n.autoDismissDelay,key:n.id,onAction:n.onAction,onClose:t,text:n.text,withAutoDismiss:n.withAutoDismiss,withClearButton:n.withClearButton}):null}}]),t}(I.a.Component),Be=ke(Me),Ke=n("sp77"),Ue=n.n(Ke),je=n("Vbcu"),Ne=n.n(je),Fe=n("iJOc"),ze=n.n(Fe),Ge=function(){var e=Ue.a.parse(document.cookie)[le.TWID_COOKIE],t=e&&e.match(/u=(\d+)/);return t&&t[1]},We=function(e){var t=Date.now(),n=Ge(),r=!0,i=window.location.reload.bind(window.location),o=function(e){r=e},a=function(e){if("active"===e){if(r){Date.now()-t>=216e5&&i()}c()}},s=function(){var t=Object($.i)(e.getState()),r=Ge();return!!r&&(n!==r||t&&t!==r)},c=function(){s()&&i()};c(),ze.a.isConnected.addEventListener("connectionChange",o),ze.a.isConnected.getConnectionInfo().then(o),Ne.a.addEventListener("change",a)},qe={init:We},Ye=n("fZjL"),Ve=n.n(Ye),Qe=n("bOdI"),He=n.n(Qe),Xe=n("pDlh"),Ze=n.n(Xe),Je="keyboard",$e="mouse",et=["textarea","input"],tt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return-1!==et.indexOf(e.toLowerCase())},nt=[],rt=(Ae={},He()(Ae,Je,!1),He()(Ae,$e,!1),Ae),it=function e(t){var n=this;w()(this,e),this._handleTimerEnd=function(){n._count>=3&&n._handleDetected(),n._reset()},this._handleDetected=function(){n._reset(),n.detach(),n.detected()},this._reset=function(){clearTimeout(n._timer),n._timer=void 0,n._count=0},this._handleMouseMove=function(e){if(n._count=n._count+1,n._count>=3)return void n._handleDetected();n._timer||(n._timer=setTimeout(n._handleTimerEnd,500))},this.attach=function(){document.addEventListener("mousemove",n._handleMouseMove),document.addEventListener("touchend",n._reset)},this.detach=function(){document.removeEventListener("mousemove",n._handleMouseMove),document.removeEventListener("touchend",n._reset)},this.detected=t,this._count=0},ot=function e(t){var n=this;w()(this,e),this._handleKeyDown=function(e){var t=e.altKey,r=e.ctrlKey,i=e.metaKey,o=e.target,a=void 0===o?{}:o,s=a.nodeName;(t||r||i||!tt(s))&&(n.detach(),n.detected())},this.attach=function(){document.addEventListener("keydown",n._handleKeyDown)},this.detach=function(){document.removeEventListener("keydown",n._handleKeyDown)},this.detected=t},at=void 0,st=function(){at=[new ot(function(){return r(Je)}),new it(function(){return r($e)})],at.forEach(function(e){return e.attach()})},ct=function(){return Ve()(rt).filter(function(e){return rt[e]})},ut=function(e){return rt[e]},lt=function(e,t){var n=function(){return rt[t]};n()?Ze()(e):nt.push({matches:n,callback:e})},dt=function(e,t){var n=function(){return t.some(function(e){return rt[e]})};n()?Ze()(e):nt.push({matches:n,callback:e})},pt=function(e,t){var n=function(){return t.every(function(e){return rt[e]})};n()?Ze()(e):nt.push({matches:n,callback:e})},ht=function(e){var t=nt.indexOf(e);t>-1&&nt.splice(t,1)},ft=function(){nt=[],Ve()(rt).forEach(function(e){rt[e]=!1}),at.forEach(function(e){return e.detach()})},mt={MOUSE_INTERVAL_TIME_IN_MS:500,SUCCESSIVE_MOUSE_EVENTS:3,detected:r},vt=n("knr3"),bt=n.n(vt),_t=function(e){return function(t){t.stopPropagation(),e(t)}},yt=n("CF/l"),wt=n("qX3G"),gt=Object(z.createSelector)(wt.b,function(e){return{loggedInUserScreenName:e&&e.screen_name}}),kt=Object(F.connect)(gt,null),St=n("7q6/"),Et=function(e){function t(){var e,n,r,i;w()(this,t);for(var o=arguments.length,a=Array(o),s=0;s<o;s++)a[s]=arguments[s];return n=r=E()(this,(e=t.__proto__||_()(t)).call.apply(e,[this].concat(a))),r._bindKeyboardShortcuts=function(){var e=r.props,t=e.history,n=e.loggedInUserScreenName;if(n){var i={"g h":function(){return t.push("/home")},"g o":function(){return t.push("/explore")},"g n":function(){return t.push("/notifications")},"g r":function(){return t.push("/notifications/mentions")},"g p":function(){return t.push("/"+n)},"g l":function(){return t.push("/"+n+"/likes")},"g i":function(){return t.push("/"+n+"/lists")},"g m":function(){return t.push("/messages")},"g s":function(){return t.push("/settings")},m:function(e){e.preventDefault(),t.push("/messages/compose")},n:function(e){e.preventDefault(),t.push("/compose/tweet")}};r._unbindKeyboardShortcuts=Object(yt.a)(i)}},r._handleKeyDown=function(e){"Backspace"===e.key&&(r._backspaceDown=Date.now(),e.preventDefault(),e.stopPropagation())},r._handleKeyUp=function(e){if("Backspace"===e.key){var t=Date.now()-r._backspaceDown<500,n=r.props.history.length>0;t&&n?(r.props.history.goBack(),e.preventDefault(),e.stopPropagation()):window.close()}},i=n,E()(r,i)}return C()(t,e),k()(t,[{key:"componentDidMount",value:function(){this._bindKeyboardShortcuts(),St.a.isKaiOS()&&(document.addEventListener("keydown",this._handleKeyDown),document.addEventListener("keyup",this._handleKeyUp))}},{key:"componentWillUnmount",value:function(){this._unbindKeyboardShortcuts&&this._unbindKeyboardShortcuts(),St.a.isKaiOS()&&(document.removeEventListener("keydown",this._handleKeyDown),document.removeEventListener("keyup",this._handleKeyUp))}},{key:"render",value:function(){return null}}]),t}(I.a.Component),Tt=Object(de.withRouter)(kt(Et)),Ct=n("//Fk"),Ot=n.n(Ct),It=n("DOzz"),Lt=n("6Ew8"),Dt=n("27n3"),xt=n("sLaq"),At=n("u69G"),Pt=n("Z5Qg"),Rt=n.n(Pt),Mt={client:"m5",page:"external",action:"referred"},Bt=function(e,t,n){var r=Object(At.a)(n),i=Dt.b&&Dt.b.location.query,o=r&&r.getCampaign(),a=o||{},s=a.banner,c=a.carrier_id,u={accessBannerFlag:!!s,carrierKey:c},l=It.c({query:i,httpReferer:document.referrer||"",requestUrl:window.location.href,carrierInfo:u});if(Rt()(l))return Ot.a.resolve();if(l.referer&&!Y.a.isExternalUrl(l.referer)&&!Y.a.isInternalRedirect(l.referer))return Ot.a.resolve();l.referer||(l.referer=""),l.referral_details_str||(l.referral_details_str=""),l.referral_type||(l.referral_type=0);var d=Object(ie.a)("external_referer");d&&(l.external_referer_cookie_value=d);var p=l.referral_type===It.a.Access,h=Mt;d&&p&&(h.action="set_access_referer_cookie");var f=t.createEventObject(h,"client_event",l),m=t.createPayload([f]);return e.Jot.externalReferer(m).then(function(e){var t=It.b(e&&e[0]);t&&Object(ie.b)(t)}).catch(function(e){Lt.a.isAPIError(e)?Object(xt.b)("SCRIBE_EXTERNAL_REFERER")()(n.dispatch)(e):Object(ae.a)(e)})},Kt=Bt,Ut=n("d39v"),jt=n("ZNRd"),Nt=n("uMse"),Ft=n.n(Nt),zt=n("s2Y1"),Gt=n("TwGT"),Wt=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;window.requestIdleCallback?window.requestIdleCallback(function(){return e.fire()}):setTimeout(function(){return e.fire()},t)},qt=function(e,t){if($.f(e.getState())){var n=Object(xt.b)("BADGE_TIMERS")(He()({showToast:!1},Ut.a.AccessDeniedByBouncer,{customAction:Ft.a}))(e.dispatch);Object(jt.a)().then(function(t){var r=new Ce.b(3e4).interval(function(){e.dispatch(Object(Gt.b)(t)).catch(n)});r.start(),Wt(r)});var r=new Ce.b(3e4).interval(function(){e.dispatch(zt.b.fetchInitialOrTop()).catch(n)});r.start(),Wt(r)}},Yt=qt,Vt=n("pFYg"),Qt=n.n(Vt),Ht=n("gRE1"),Xt=n.n(Ht),Zt=n("R3sX"),Jt=n.n(Zt),$t=(function(){function e(t){var n=this,r=t.livePipeline,i=t.executeGraphQLQuery,s=t.callback,u=t.onGraphQLExecute,l=t.onGraphQLResponse,d=t.onSubscriptionStatus,p=t.onBackoff;w()(this,e),this.subscribedTopic=null,this.externalSubscription=null,this.internalSubscription=null,this.backoffCount=0,this._start=function(){n._deferCall(n.onGraphQLExecute),n.executeGraphQLQuery().then(function(e){if(n._deferCall(n.onGraphQLResponse,e.status),!e.ok){var t=e.status>=500&&e.status<600;return void n._backoffAndRetry(t?"SERVER_ERROR":"DEFAULT")}return e.json().then(n._handleMessage)}).catch(function(e){return n._backoffAndRetry()})},this._handleMessage=function(e){var t=a(e);if(t)return n._processSubscriptionStatus(t.status,e);n.backoffCount=0},this._backoffAndRetry=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"DEFAULT";n.backoffCount++;var r=e._calculateBackoff(n.backoffCount,t);n._teardownSubscriptions(),clearTimeout(n.backoffTimeoutId),n.backoffTimeoutId=setTimeout(n._start,c(r)),n._deferCall(n.onBackoff,r)},this._setupSubscriptions=function(e){n.subscribedTopic!==e&&(n._teardownSubscriptions(),n.internalSubscription=n.livePipeline.subscribeTopic(e,function(e){return n._handleMessage(o(e))}),n.externalSubscription=n.livePipeline.subscribeTopic(e,function(e){return n.callback(o(e))}),n.subscribedTopic=e)},this.livePipeline=r,this.executeGraphQLQuery=i,this.callback=s,this.onGraphQLExecute=u,this.onGraphQLResponse=l,this.onSubscriptionStatus=d,this.onBackoff=p,this._start()}k()(e,[{key:"teardown",value:function(){this._teardownSubscriptions(),clearTimeout(this.backoffTimeoutId)}},{key:"_processSubscriptionStatus",value:function(e,t){var n=void 0;switch(this._deferCall(this.onSubscriptionStatus,e),e){case"OK":if(!(n=s(t)))throw new Error("Topic is missing in response.");this._setupSubscriptions(n);break;case"RENEW":this._backoffAndRetry("RENEW");break;case"ERROR":this._backoffAndRetry()}}},{key:"_teardownSubscriptions",value:function(){this.internalSubscription&&this.internalSubscription.teardown(),this.externalSubscription&&this.externalSubscription.teardown(),this.internalSubscription=null,this.externalSubscription=null,this.subscribedTopic=null}},{key:"_deferCall",value:function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=e;i&&Ot.a.resolve().then(function(){return i.apply(void 0,n)})}}],[{key:"_calculateBackoff",value:function(e,t){switch(t){case"RENEW":return 1===e?0:u(1e4,6e4,e-1);case"SERVER_ERROR":return u(1e4,6e5,e);default:return u(1e4,6e4,e)}}}])}(),392),en=function(){function e(t){var n=t.makeEventSource,r=t.callback,i=t.topics;w()(this,e),tn.call(this),this.makeEventSource=n,this.callback=r,this.setTopics(i),this._connect()}return k()(e,[{key:"setTopics",value:function(e){this.topics=e}},{key:"getAutoSubscribedTopics",value:function(){return this.connection?this.connection.topics:[]}},{key:"_getTopicsForAutoSubscribe",value:function(){return this.topics.slice(0,e.MAX_AUTO_SUBSCRIBE_TOPICS)}},{key:"_cleanup",value:function(){var e=this.connection;e&&(e.eventSource.removeEventListener("message",this._handleMessage),e.eventSource.removeEventListener("error",this._handleError),e.eventSource.close(),this.connection=null),clearTimeout(this.backoffTimeoutId)}},{key:"teardown",value:function(){this._cleanup()}}]),e}();en.MAX_AUTO_SUBSCRIBE_TOPICS=20;var tn=function(){var e=this;this.topics=[],this.backoffDuration=0,this._handleMessage=function(t){var n=t.data;try{var r=JSON.parse(n);e.connection&&"/system/config"===r.topic&&(e.connection.hasConfig=!0),e.callback(r)}catch(e){}},this._handleError=function(){if(e.connection&&e.connection.eventSource.readyState!==e.connection.eventSource.OPEN){var t=e.connection;t&&t.eventSource.readyState===t.eventSource.CONNECTING&&h(t.topics,e._getTopicsForAutoSubscribe())||(e._cleanup(),e.connection&&e.connection.hasConfig?e.backoffDuration=1e3:e.backoffDuration=Math.max(1e3,Math.min(2*e.backoffDuration,6e4)),e.backoffTimeoutId=setTimeout(e._connect,c(e.backoffDuration)))}},this._connect=function(){e._cleanup();var t=e._getTopicsForAutoSubscribe();e.makeEventSource(t).then(function(n){if("object"!==(void 0===n?"undefined":Qt()(n)))throw new Error("EventSource must be defined");n.addEventListener("message",e._handleMessage),n.addEventListener("error",e._handleError),e.connection={eventSource:n,topics:t,hasConfig:!1}}).catch(function(){e._handleError()})}},nn=function(){function e(t){var n=this,r=t.updateSubscriptions;w()(this,e),this.sessionId="",this.topics=[],this._setTopics=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=n.topics;n.topics=p(e);var r=n.topics.filter(function(e){return-1===t.indexOf(e)}),i=t.filter(function(e){return-1===n.topics.indexOf(e)});n._updateSubscriptions({toSubscribe:r,toUnsubscribe:i,sessionId:n.sessionId})},this.setTopics=Jt()(this._setTopics,e.SET_TOPICS_THROTTLE,{leading:!1}),this._subscribeAll=function(){n._updateSubscriptions({toSubscribe:n.topics,toUnsubscribe:[],sessionId:n.sessionId})},this._updateSubscriptions=function(e){var t=e.toSubscribe,r=e.toUnsubscribe,i=e.sessionId,o=!i,a=0===t.length&&0===r.length;o||a||n.updateSubscriptions({toSubscribe:t,toUnsubscribe:r,sessionId:i})},this.updateSubscriptions=r}return k()(e,[{key:"setConfig",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(clearInterval(this.intervalId),t&&t.config){this.sessionId=t.config.session_id;var r=this.topics.filter(function(e){return-1===n.indexOf(e)});this._updateSubscriptions({toSubscribe:r,toUnsubscribe:[],sessionId:this.sessionId});var i=(t.config.subscription_ttl_millis||e.DEFAULT_TTL)-e.TIMEOUT_PREEMPT_DURATION;this.intervalId=setInterval(this._subscribeAll,i)}}},{key:"teardown",value:function(){clearInterval(this.intervalId),this._updateSubscriptions({toSubscribe:[],toUnsubscribe:this.topics,sessionId:this.sessionId})}}]),e}();nn.DEFAULT_TTL=12e4,nn.TIMEOUT_PREEMPT_DURATION=2e4,nn.SET_TOPICS_THROTTLE=1e3;var rn=function(){function e(t){var n=this,r=t.makeEventSource,i=t.updateSubscriptions;w()(this,e),this.isSuspended=!1,this.eventSourceConnector=null,this.subscriptionsByTopic={},this._closeEventSource=function(){n._clearExpiryTimeout(),n.livePipelineResubscriber.setConfig(null),n.eventSourceConnector&&(n.eventSourceConnector.teardown(),n.eventSourceConnector=null)},this._restartEventSource=function(){n._closeEventSource(),n._reconcileTopics()},this._handleMessage=function(t){var r=t.topic,i=t.payload;r===e.SYSTEM_CONFIG_TOPIC&&n.eventSourceConnector&&n.livePipelineResubscriber.setConfig(i,n.eventSourceConnector.getAutoSubscribedTopics());var o=Ot.a.resolve(i),a=function(e){return o.then(e.callback)};return(n.subscriptionsByTopic[r]||[]).map(a)},this.makeEventSource=r,this.livePipelineResubscriber=new nn({updateSubscriptions:d({promiseFactory:i,condition:l,sideEffect:this._restartEventSource})})}return k()(e,[{key:"teardown",value:function(){this._clearExpiryTimeout(),this.subscriptionsByTopic={},this.livePipelineResubscriber.teardown(),this.eventSourceConnector&&(this.eventSourceConnector.teardown(),this.eventSourceConnector=null)}},{key:"suspend",value:function(){this.isSuspended=!0,this._reconcileTopics()}},{key:"resume",value:function(){this.isSuspended=!1,this._reconcileTopics()}},{key:"subscribeTopic",value:function(e,t){var n=this;if(!e)return{teardown:function(){}};var r={topic:e,callback:t};return this.subscriptionsByTopic[e]=this.subscriptionsByTopic[e]||[],this.subscriptionsByTopic[e].push(r),this._reconcileTopics(),{teardown:function(){var t=(n.subscriptionsByTopic[e]||[]).filter(function(e){return e!==r});0===t.length?delete n.subscriptionsByTopic[e]:n.subscriptionsByTopic[e]=t,n._reconcileTopics()}}}},{key:"_reconcileTopics",value:function(){var t=this.isSuspended?[]:Ve()(this.subscriptionsByTopic),n=t.length>0;n&&this._clearExpiryTimeout(),this.livePipelineResubscriber.setTopics(t),this.eventSourceConnector&&this.eventSourceConnector.setTopics(t),n&&!this.eventSourceConnector?(this._closeEventSource(),this.eventSourceConnector=new en({makeEventSource:this.makeEventSource,callback:this._handleMessage,topics:t})):n||!this.eventSourceConnector||this.connectionExpiryTimeoutId||(this.connectionExpiryTimeoutId=setTimeout(this._closeEventSource,e.UNUSED_CONNECTION_EXPIRY))}},{key:"_clearExpiryTimeout",value:function(){clearTimeout(this.connectionExpiryTimeoutId),this.connectionExpiryTimeoutId=null}}]),e}();rn.SYSTEM_CONFIG_TOPIC="/system/config",rn.UNUSED_CONNECTION_EXPIRY=3e4;var on={isSupported:function(){return"EventSource"in window},isSupportedAndReady:function(){return this.isSupported()&&!!this.livePipelineInstance},create:function(e){var t=this;if(!this.isSupported())throw new Error("This browser does not support LivePipeline");if(this.livePipelineInstance)throw new Error("LivePipeline should only be initialized once");return this.livePipelineInstance=new rn({makeEventSource:function(e){var t=e.map(encodeURIComponent).join(","),n="https://api.twitter.com/live_pipeline/events?topic="+t;return Ot.a.resolve(new window.EventSource(n,{withCredentials:!0}))},updateSubscriptions:function(t){return e.LivePipeline.updateSubscriptions(t).catch(function(e){return e.errors[0]&&392===e.errors[0].code?void 0:Ot.a.reject(e)})}}),Ne.a.addEventListener("change",function(e){return t._handleAppStateChange(e)}),this.livePipelineInstance},get:function(){if(!this.livePipelineInstance)throw new Error("LivePipeline instance has not been initialized");return this.livePipelineInstance},_handleAppStateChange:function(e){"active"===e?this.get().resume():this.get().suspend()}},an=function(e){var t=function(t){if("active"===t){var n=e.body.style.display;e.body.style.display="none",e.body.clientHeight,e.body.style.display=n}};St.a.isDesktopOS()&&St.a.isIE()&&Ne.a.addEventListener("change",t)},sn={init:an},cn=["/login/error","/i/sms_login"],un=function(e){var t=!$.f(e),n=$.d(e);if(t&&n&&Dt.b){var r=Dt.b.location.pathname;-1===cn.indexOf(r)&&Dt.b.replace({pathname:"/i/sms_login"})}},ln=un;n.d(t,"BottomBanner",function(){return v.a}),n.d(t,"DtabBar",function(){return Q}),n.d(t,"ModalSheet",function(){return H.a}),n.d(t,"SmartLockPrompt",function(){return be}),n.d(t,"Toast",function(){return Be}),n.d(t,"appReloader",function(){return qe}),n.d(t,"inputDetect",function(){return m}),n.d(t,"bindKeyboardShortcuts",function(){return i}),n.d(t,"GlobalKeyboardShortcuts",function(){return Tt}),n.d(t,"scribeExternalReferer",function(){return Kt}),n.d(t,"badgeTimers",function(){return Yt}),n.d(t,"LivePipeline",function(){return on}),n.d(t,"ie11Reflower",function(){return sn}),n.d(t,"redirectEmailUser",function(){return ln})}});