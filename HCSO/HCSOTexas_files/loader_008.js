webpackJsonp(["loader.Trends"],{mvsA:function(e,t,n){"use strict";function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,t=arguments[1];switch(t.type){case w.REQUEST:return o()({},e,{fetchStatus:I.a.LOADING});case w.FAILURE:return o()({},e,{fetchStatus:I.a.FAILED});case w.SUCCESS:return o()({},e,{fetchStatus:I.a.LOADED,metadata:t.payload.result.metadata,trends:C()(t.payload.entities.trends||{})});default:return e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n("Dd8w"),o=n.n(a),d=n("Zx67"),s=n.n(d),c=n("Zrlr"),l=n.n(c),i=n("wxAW"),u=n.n(i),p=n("zwoO"),m=n.n(p),h=n("Pf15"),f=n.n(h),_=n("iuYP"),v=n("7t5w"),g=n("QRO9"),E=n("//Fk"),T=n.n(E),y=n("bOdI"),S=n.n(y),b=n("gRE1"),C=n.n(b),I=n("zAiL"),k=n("ipg4"),D=n("IIth"),w=Object(D.a)("rweb/trends","FETCH"),x={fetchStatus:I.a.NONE,metadata:null,trends:[]};k.a.register(S()({},"trends",r));var O=function(e){return e.trends.trends},A=function(e){return e.trends.fetchStatus},L=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t,n,r){var a=r.api,o=n().trends.metadata;return o&&!j(o)?T.a.resolve():Object(D.b)(t,{params:e,request:a.Trends.fetch})({actionTypes:w,context:"FETCH_TRENDS"})}},j=function(e){return Date.now()-e.timestamp>e.refresh_interval_millis},N=n("4n+p"),R=n("sLaq"),F=n("bndy"),H=Object(F.createSelector)(A,O,function(e,t){return{fetchStatus:e,trends:t}}),M={createLocalApiErrorHandler:Object(R.b)("LEGACY_TRENDS"),fetchTrendsIfNeeded:L,logTrend:g.c,scribeAction:v.d},q=Object(N.connect)(H,M),z=n("bgPG"),G=n("Y2tT"),P=n("gT2f"),U=n("hlyO"),Y=n.n(U),K=n("Dxna"),B=n("x/J6"),W=n("C3D3"),J=n("GiK3"),Q=n.n(J),V={trend:"trend"},Z=n("2fO2"),X=n("4vsE"),$=n.n(X),ee=n("Mpbj"),te=n.n(ee),ne=n("arlL"),re=n.n(ne),ae=n("jYKd"),oe=n.n(ae),de=n("KSGD"),se=function(e){function t(){var e,n,r,a;l()(this,t);for(var o=arguments.length,d=Array(o),c=0;c<o;c++)d[c]=arguments[c];return n=r=m()(this,(e=t.__proto__||s()(t)).call.apply(e,[this].concat(d))),r._handleClick=function(){var e=r.props;(0,e.onClick)(e.trend)},a=n,m()(r,a)}return f()(t,e),u()(t,[{key:"componentDidMount",value:function(){var e=this.props;(0,e.onImpression)(e.trend)}},{key:"shouldComponentUpdate",value:function(e){return!Y()(this.props,e)}},{key:"render",value:function(){var e=this.props.trend,t=!!e.advertiser_name,n=e.target.pinned_tweets_str&&e.target.pinned_tweets_str.join(","),r=t?W.a.PromotedTrendClick:W.a.TrendClick,a={q:e.target.query,src:r,pt:n},o=t?Q.a.createElement(B.a,{promotedContent:e,size:"small",style:ce.promotedIndicator}):Q.a.createElement(te.a,{color:"deepGray",size:"small"},e.meta_description);return Q.a.createElement(K.a,{link:_.d({pathname:"/search",query:a}),onClick:this._handleClick,style:ce.link,testID:V.trend},Q.a.createElement(re.a,null,Q.a.createElement($.a,{style:ce.trend},Q.a.createElement(te.a,{color:"normal",weight:"bold"},Q.a.createElement(Z.a,{allowHashflags:!0,text:e.name})),e.description&&Q.a.createElement(te.a,{color:"normal",size:"small"},e.description),o)))}}]),t}(Q.a.Component),ce=oe.a.create(function(e){return{trend:{flexDirection:"column",paddingHorizontal:e.spaces.xSmall,paddingVertical:e.spaces.small,borderBottomWidth:1,borderBottomStyle:"solid",borderBottomColor:e.colors.borderColor},promotedIndicator:{paddingTop:e.spaces.xxSmall},link:{textDecorationLine:"none"}}}),le=se,ie=n("avDV"),ue=n("kdC7");n("uwYN");n.d(t,"LegacyTrends",function(){return _e});var pe=n("DeSE"),me={section:"trendsplus"},he=pe.formatMessage("Trending now"),fe=pe.formatMessage("Show more"),_e=function(e){function t(){var e,n,r,a;l()(this,t);for(var d=arguments.length,c=Array(d),i=0;i<d;i++)c[i]=arguments[i];return n=r=m()(this,(e=t.__proto__||s()(t)).call.apply(e,[this].concat(c))),r._renderTrends=function(){var e=r.props.trends,t=r.props.maxCount||e.length,n=t<e.length,a=e.slice(0,t),o=r.context.loggedInUserId?_.d("/i/trends"):_.d("/search");return Q.a.createElement($.a,null,a.map(function(e){return Q.a.createElement(le,{key:e.name,onClick:r._handleTrendSelected,onImpression:r._handleTrendImpression,trend:e})}),n&&Q.a.createElement(ie.a,{link:o,text:fe}))},r._handleFetchTrends=function(){var e=r.props,t=e.createLocalApiErrorHandler;(0,e.fetchTrendsIfNeeded)().catch(t())},r._handleTrendSelected=function(e){var t=r.props,n=t.scribeAction,a=t.scribeNamespace,d=e.advertiser_name?"promoted_trend":"trend";n(o()({},a,{component:"trend_row",element:d,action:"search"})),e.advertiser_name&&r._logTrend({promoted_trend_id:e.id,event:ue.d.CLICK})},r._handleTrendImpression=function(e){e.advertiser_name&&r._logTrend({promoted_trend_id:e.id,event:ue.d.IMPRESSION})},r._logTrend=function(e){var t=r.props,n=t.createLocalApiErrorHandler;return(0,t.logTrend)(e).catch(n())},a=n,m()(r,a)}return f()(t,e),u()(t,[{key:"componentWillMount",value:function(){this._handleFetchTrends()}},{key:"render",value:function(){var e=this.props.fetchStatus;return Q.a.createElement($.a,null,Q.a.createElement(P.a,{text:he}),Q.a.createElement(G.a,{fetchStatus:e,onRequestRetry:this._handleFetchTrends,render:this._renderTrends}))}}]),t}(Q.a.Component);_e.contextTypes={loggedInUserId:de.string};t.default=Object(z.b)(me)(q(_e))}});